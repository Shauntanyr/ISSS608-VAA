[
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "title": "Take-home Exercise 1",
    "section": "",
    "text": "Show the code\nknitr::opts_chunk$set(fig.width=14, fig.height = 14 * 0.618)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#installing-and-launching-requisite-r-packages",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#installing-and-launching-requisite-r-packages",
    "title": "Take-home Exercise 1",
    "section": "2.1 Installing and launching requisite R packages",
    "text": "2.1 Installing and launching requisite R packages\nThe code chunk below uses p_load() of pacman package to check if tidyverse packages are installed on the computer. If they are, then they will be launched into R.\n\n\nShow the code\npacman::p_load(ggstatsplot, ggplot2, ggthemes, psych, plotly, corrplot, lubridate, ggpubr, plotly, hrbrthemes, ggrepel, RColorBrewer, gganimate, viridis, ggridges, ggrepel, testthat, hmisc, tidyverse, dplyr, gapminder, ggiraph, patchwork, DT, readxl, performance, parameters, see, ungeviz, plotly, crosstalk, ggdist, gganimate, gt, rstatix, png, webshot2)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#importing-the-data",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#importing-the-data",
    "title": "Take-home Exercise 1",
    "section": "2.2 Importing the data",
    "text": "2.2 Importing the data\nThe two datasets were imported using the following code:\n\n\nShow the code\nfinancial_data <- read_csv(\"data/FinancialJournal.csv\")\nparticipants <- read_csv(\"data/Participants.csv\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#data-prep",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#data-prep",
    "title": "Take-home Exercise 1",
    "section": "2.4 Data Prep",
    "text": "2.4 Data Prep\nData Preparation in R: The two data sets are first merged matching “participantID”, then data type corrected, before creating a new month-year date column.\n\n\nShow the code\n# The two datasets are first merged into a single dataframe: merged_data\nmerged_data <- merge(financial_data, participants, by = \"participantId\")\n\n# The data type errors listed above are corrected and saved into a new dataframe: merged_data_cleaned\nmerged_data_cleaned <- merged_data %>%\n\n  # Correcting Column Data formats\n  mutate(participantId = as.integer(participantId),\n         householdSize = as.integer(householdSize),\n         joviality = as.numeric(joviality),\n         age = as.integer(age),\n         # Changing data type to ordinal string factor\n         educationLevel = factor(educationLevel, \n                                 levels = c(\"Low\", \"HighSchoolOrCollege\", \"Bachelors\", \"Graduate\"),\n                                 ordered = TRUE),\n         # Changing data type to boolean\n         haveKids = as.logical(haveKids),\n         # Mutatating data from date time to just mth-year\n         month_year = format(as.Date(timestamp), \"%m-%Y\"))\n\n\nHowever, for clearer analysis, the transaction are summed across the various months to give the total monthly transaction amount and the resultant data frame saved as “df”:\n\n\nShow the code\n# Summation of each participant's monthly expenditure/income \nmerged_data_summed <- merged_data_cleaned %>%\n  group_by(participantId, month_year, category) %>%\n  summarize(total_amount = sum(amount)) %>%\n  ungroup()\n\n# Pivot the category column to become columns on its own\nMonthly_expenditure <- merged_data_summed %>% \n  pivot_wider(names_from = category, values_from = total_amount, values_fill = 0)\n\ndf <- Monthly_expenditure %>%\n  left_join(merged_data_cleaned %>% distinct(participantId, householdSize, haveKids, age, educationLevel, interestGroup, joviality), by = \"participantId\")\n\nhead(df)\n\n\n# A tibble: 6 × 14\n  partici…¹ month…² Educa…³  Food Recre…⁴ Shelter   Wage RentA…⁵ house…⁶ haveK…⁷\n      <int> <chr>     <dbl> <dbl>   <dbl>   <dbl>  <dbl>   <dbl>   <int> <lgl>  \n1         0 01-2023   -38.0 -265.   -210.   -555.  9048.       0       3 TRUE   \n2         0 02-2023   -38.0 -239.   -320.   -555.  8226.       0       3 TRUE   \n3         0 03-2022   -76.0 -268.   -349.  -1110. 11932.       0       3 TRUE   \n4         0 04-2022   -38.0 -266.   -219.   -555.  8637.       0       3 TRUE   \n5         0 05-2022   -38.0 -265.   -383.   -555.  9048.       0       3 TRUE   \n6         0 06-2022   -38.0 -257.   -466.   -555.  9048.       0       3 TRUE   \n# … with 4 more variables: age <int>, educationLevel <ord>,\n#   interestGroup <chr>, joviality <dbl>, and abbreviated variable names\n#   ¹​participantId, ²​month_year, ³​Education, ⁴​Recreation, ⁵​RentAdjustment,\n#   ⁶​householdSize, ⁷​haveKids\n\n\nThe dataframe is further manipulated (summed across the month to get yearly transaction amounts) to display the yearly expenditure/income and saved as df1:\n\n\nShow the code\n# Creating a new dataframe that displays the yearly expenditure/income\ndf1 <- df %>%\n  group_by(participantId) %>%\n  summarise(Education = sum(Education),\n            Food = sum(Food),\n            Recreation = sum(Recreation),\n            Shelter = sum(Shelter),\n            Wage = sum(Wage), RentAdjustment = sum(RentAdjustment), .groups = 'drop') %>%\n  left_join(df %>% distinct(participantId, householdSize, haveKids, age, educationLevel, interestGroup, joviality), by = \"participantId\")\n\nhead(df1)\n\n\n# A tibble: 6 × 13\n  particip…¹ Educa…²   Food Recre…³ Shelter   Wage RentA…⁴ house…⁵ haveK…⁶   age\n       <int>   <dbl>  <dbl>   <dbl>   <dbl>  <dbl>   <dbl>   <int> <lgl>   <int>\n1          0   -494. -3142.  -4384.  -7215. 1.10e5      0        3 TRUE       36\n2          1   -494. -3167.  -6638.  -7215. 9.64e4      0        3 TRUE       25\n3          2   -167. -3467.  -4172.  -7235. 8.51e4      0        3 TRUE       35\n4          3   -494. -3396.  -4704.  -7215. 8.23e4      0        3 TRUE       21\n5          4   -167. -3262.  -6316. -18410. 1.06e5   4809.       3 TRUE       43\n6          5   -167. -4145.  -5139.  -7800. 2.32e4      0        3 TRUE       32\n# … with 3 more variables: educationLevel <ord>, interestGroup <chr>,\n#   joviality <dbl>, and abbreviated variable names ¹​participantId, ²​Education,\n#   ³​Recreation, ⁴​RentAdjustment, ⁵​householdSize, ⁶​haveKids"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex04/In-class_Ex04.html",
    "href": "In-class_Ex/In-class_Ex04/In-class_Ex04.html",
    "title": "In-class Exercise 4",
    "section": "",
    "text": "pacman::p_load(plotly, ggstatsplot, ggthemes, rstatix, gt, patchwork, tidyverse, png, webshot2)\n\n\nexam_data <- read_csv(\"data/Exam_data.csv\")\n\n\nThe plotThe code chunk\n\n\n\n\n\n\n\n\n\n\nggplot(exam_data, \n       aes(sample=ENGLISH)) +\n  stat_qq() +\n  stat_qq_line()\n\n\n\n\n\nauthoring with callout\n\n\n\n\n\n\nNote\n\n\n\nWe can see that the points deviate significantly from the straight diagonal line. this is a clear indication that the set of data is not normally distributed.\n\n\n\nThe plotThe code chunk\n\n\n\n\n\n\n\n\n\n\nqq <- ggplot(exam_data, \n       aes(sample=ENGLISH)) +\n  stat_qq() +\n  stat_qq_line()\n\nsw_t <- exam_data %>%\n  shapiro_test(ENGLISH) %>%\n  gt()\n\ntmp <- tempfile(fileext = '.png')\ngtsave(sw_t, tmp)\ntable_png <- png::readPNG(tmp, native = TRUE)\n\nqq + table_png    \n\n\n\n\nremember to set.seed(1234) to ensure reproducibility\n\nset.seed(1234)\n\ngghistostats(\n  data = exam_data,\n  x = ENGLISH,\n  type = \"bayes\",\n  test.value = 60,\n  xlab = \"English scores\"\n)\n\n\n\n\n\nset.seed(1234)\n\ngghistostats(\n  data = exam_data,\n  x = ENGLISH,\n  type = \"np\",\n  test.value = 60,\n  xlab = \"English scores\"\n)\n\n\n\n\nsince p value smaller than critical value (95% confidence level), reject the null hypothesis.\n\nggbetweenstats(\n  data = exam_data,\n  x = GENDER, \n  y = MATHS,\n  type = \"p\",\n  messages = FALSE\n)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html",
    "href": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html",
    "title": "Hands-on Exercise 1",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if tidyverse packages are installed on the computer. If they are, then they will be launched into R.\n\n\nShow the code\npacman::p_load(tidyverse)\n\n\n\n\n\n\n\nShow the code\nexam_data <- read_csv(\"data/Exam_data.csv\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html",
    "title": "Hands-on Exercise 2",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if the required libraries are installed on the computer. If they are, then they will be launched into R.\n\npacman::p_load(tidyverse, ggrepel, ggthemes, hrbrthemes, patchwork)\n\n\n\n\n\nexam_data <- read_csv(\"data/Exam_data.csv\")\n\n\n\n\n\nsummary(exam_data)\n\n      ID               CLASS              GENDER              RACE          \n Length:322         Length:322         Length:322         Length:322        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n    ENGLISH          MATHS          SCIENCE     \n Min.   :21.00   Min.   : 9.00   Min.   :15.00  \n 1st Qu.:59.00   1st Qu.:58.00   1st Qu.:49.25  \n Median :70.00   Median :74.00   Median :65.00  \n Mean   :67.18   Mean   :69.33   Mean   :61.16  \n 3rd Qu.:78.00   3rd Qu.:85.00   3rd Qu.:74.75  \n Max.   :96.00   Max.   :99.00   Max.   :96.00"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#plotting-the-data-using-plain-vanilla-ggplot2",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#plotting-the-data-using-plain-vanilla-ggplot2",
    "title": "Hands-on Exercise 2",
    "section": "Plotting the data using plain vanilla ggplot2",
    "text": "Plotting the data using plain vanilla ggplot2\n\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label(aes(label = ID), \n             hjust = .5, \n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#plotting-the-data-using-ggrepel",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#plotting-the-data-using-ggrepel",
    "title": "Hands-on Exercise 2",
    "section": "Plotting the data using ggrepel",
    "text": "Plotting the data using ggrepel\n\nWe simply replace geom_text() by geom_text_repel() and geom_label() by geom_label_repel.\n\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#working-with-ggtheme-package",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#working-with-ggtheme-package",
    "title": "Hands-on Exercise 2",
    "section": "Working with ggtheme package",
    "text": "Working with ggtheme package\n\nPlotting a histogram using theme_gray():\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_gray() +\n  ggtitle(\"Distribution of Maths scores\") \n\n\n\n\n\n\nPlotting a histogram using theme_economist():\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_economist()\n\n\n\n\n\n\nPlotting a histogram using theme_wsj():\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_wsj()"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#working-with-hrbtheme-package",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#working-with-hrbtheme-package",
    "title": "Hands-on Exercise 2",
    "section": "Working with hrbtheme package",
    "text": "Working with hrbtheme package\nhrbrthemes package provides a base theme that focuses on typographic elements, including where various labels are placed as well as the fonts that are used.\n\nPlotting the distribution of Math scores using theme_ipsum()\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum()\n\n\n\n\n\n\nPlotting the distribution of Math scores using theme_ipsum() but changing the text sizes and grid lines\n\naxis_title_size argument is used to increase the font size of the axis title to 18,\nbase_size argument is used to increase the default axis label to 15, and\ngrid argument is used to remove the x-axis grid lines.\n\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum(axis_title_size = 18,\n              base_size = 15,\n              grid = \"Y\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#creating-composite-graphics-pathwork-methods",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html#creating-composite-graphics-pathwork-methods",
    "title": "Hands-on Exercise 2",
    "section": "Creating Composite Graphics: pathwork methods",
    "text": "Creating Composite Graphics: pathwork methods\n\nCombining two ggplot2 graphs\n\np1 + p2\n\n\n\n\n\n\nCombining three ggplot2 graphs\n“|” operator to stack two ggplot2 graphs, “/” operator to place the plots beside each other, “()” operator the define the sequence of the plotting.\n\n(p1/p2) | p3\n\n\n\n\n\n\nCreating a composite figure with tag\n\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = 'I')\n\n\n\n\n\n\nCreating figure with insert\n\np12 <- p1|p2\np3 + inset_element(p2, \n                   left = 0.02, \n                   bottom = 0.7, \n                   right = 0.5, \n                   top = 1)\n\n\n\n\nCreating a composite figure by using patchwork and theme_economist() of ggtheme\n\npatchwork <- (p1 / p2) | p3\npatchwork & theme_economist()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#exploring-the-data",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#exploring-the-data",
    "title": "Take-home Exercise 1",
    "section": "2.3 Exploring the data",
    "text": "2.3 Exploring the data\nThe describe function from the Psych library is used to describe the two data sets.\n\n\nShow the code\npsych::describe(participants)\n\n\n                vars    n   mean     sd median trimmed    mad min  max range\nparticipantId      1 1011 505.00 291.99 505.00  505.00 375.10   0 1010  1010\nhouseholdSize      2 1011   1.96   0.79   2.00    1.96   1.48   1    3     2\nhaveKids           3 1011    NaN     NA     NA     NaN     NA Inf -Inf  -Inf\nage                4 1011  39.07  12.38  39.00   39.09  16.31  18   60    42\neducationLevel*    5 1011   2.46   0.93   3.00    2.47   0.00   1    4     3\ninterestGroup*     6 1011   5.63   2.91   6.00    5.66   4.45   1   10     9\njoviality          7 1011   0.49   0.29   0.48    0.49   0.37   0    1     1\n                 skew kurtosis   se\nparticipantId    0.00    -1.20 9.18\nhouseholdSize    0.06    -1.41 0.02\nhaveKids           NA       NA   NA\nage             -0.01    -1.21 0.39\neducationLevel* -0.41    -0.96 0.03\ninterestGroup*  -0.07    -1.24 0.09\njoviality        0.08    -1.23 0.01\n\n\n\n\nShow the code\npsych::describe(financial_data)\n\n\n              vars       n   mean     sd median trimmed    mad      min     max\nparticipantId    1 1513636 480.90 295.89    464  474.85 373.62     0.00 1010.00\ntimestamp        2 1513636    NaN     NA     NA     NaN     NA      Inf    -Inf\ncategory*        3 1513636   3.31   1.71      2    3.14   0.00     1.00    6.00\namount           4 1513636  20.05 111.77     -4    8.40   2.76 -1562.73 4096.53\n                range skew kurtosis   se\nparticipantId 1010.00 0.14    -1.17 0.24\ntimestamp        -Inf   NA       NA   NA\ncategory*        5.00 0.83    -1.13 0.00\namount        5659.25 7.56   247.71 0.09\n\n\nChecking for missing values:\n\n\nShow the code\nany(is.na(financial_data))\n\n\n[1] FALSE\n\n\nShow the code\nany(is.na(participants))\n\n\n[1] FALSE\n\n\nWe find that both data sets are devoid of missing values. We next take a look at the top values in the dataframe:\n\n\nShow the code\nhead(financial_data)\n\n\n# A tibble: 6 × 4\n  participantId timestamp           category  amount\n          <dbl> <dttm>              <chr>      <dbl>\n1             0 2022-03-01 00:00:00 Wage      2473. \n2             0 2022-03-01 00:00:00 Shelter   -555. \n3             0 2022-03-01 00:00:00 Education  -38.0\n4             1 2022-03-01 00:00:00 Wage      2047. \n5             1 2022-03-01 00:00:00 Shelter   -555. \n6             1 2022-03-01 00:00:00 Education  -38.0\n\n\nShow the code\nhead(participants)\n\n\n# A tibble: 6 × 7\n  participantId householdSize haveKids   age educationLevel      inter…¹ jovia…²\n          <dbl>         <dbl> <lgl>    <dbl> <chr>               <chr>     <dbl>\n1             0             3 TRUE        36 HighSchoolOrCollege H       0.00163\n2             1             3 TRUE        25 HighSchoolOrCollege B       0.328  \n3             2             3 TRUE        35 HighSchoolOrCollege A       0.393  \n4             3             3 TRUE        21 HighSchoolOrCollege I       0.138  \n5             4             3 TRUE        43 Bachelors           H       0.857  \n6             5             3 TRUE        32 HighSchoolOrCollege D       0.773  \n# … with abbreviated variable names ¹​interestGroup, ²​joviality\n\n\n\n\n\n\n\n\nNote\n\n\n\nObserved Issues with the Data\n\nThe column “timestamp” in financialJournal.csv constains timestamps of financial transactions from 1 Mar 2022 till 28 Feb 2023 - one year’s worth of data. The time would be irrelevant and therefore the month and year would be extracted.\nError is data types:\n\n\n\nEducation Level column in participants.csv should be ordinal, in the following order: Low<HighSchoolorCollege<Bachelors<Graduate\nParticipantID, householdSize, Age should be formatted as integers\nJoviality should be formatted as float\nHaveKids should be formatted as a boolean"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#exploratory-data-analysis",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#exploratory-data-analysis",
    "title": "Take-home Exercise 1",
    "section": "3.1 Exploratory Data Analysis",
    "text": "3.1 Exploratory Data Analysis\nGiven the task which is to use the data to assist city planners in disbursing a large city renewal grant for major community revitalization efforts, appropriate static and interactive statistical graphics methods would be applied to the data to explore the complex data in an engaging way and reveal hidden patterns.\nA look at the distribution of the data with joviality as the target variable.\n\n\nShow the code\nggplot(df1) +\n  aes(x = joviality) +\n  geom_histogram(bins = 60L, fill = \"#112446\") +\n  theme_minimal() + labs(\n    x = \"Joviality\",\n    y = \"Count of Participants\",\n    title = \"Histogram of Joviality of Participants\",\n    subtitle = \"This plot shows the distribution of joviality scores - which seems to be uniformly distributed. \"\n  ) + theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\n\n\nShow the code\nset.seed(1234)\n\ngghistostats(\n  data = df1,\n  x = joviality,\n  type = \"bayes\",\n  test.value = 50,\n  xlab = \"Joviality\"\n) +\n  labs(\n    x = \"Joviality\",\n    y = \"Count of Participants\",\n    title = \"Histogram of Joviality of Participants\",\n    subtitle = \"This plot shows the distribution of joviality scores - which seems to be uniformly distributed. \"\n  ) +\n  theme_minimal() + theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\n\n\nShow the code\nset.seed(1234)\n\ngghistostats(\n  data = df1,\n  x = Wage,\n  type = \"bayes\",\n  test.value = 60,\n  xlab = \"Wage\"\n) +\n  labs(\n    x = \"Wage\",\n    y = \"Count of Participants\",\n    title = \"Histogram of Wage of Participants\",\n    subtitle = \"This plot shows the distribution of joviality scores - which seems to be right skewed. \"\n  ) +\n  theme_minimal() + theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nThis chart shows that the distribution of wages among participants is right skewed.\n\n\nShow the code\nggplot(data=df1, \n       aes(x= Wage, \n           y=joviality, color = educationLevel)) +\n  geom_point() +\n  geom_smooth(size=0.5) + \n  theme_minimal() +\n  \n    labs(title = 'Scatterplot of Joviality levels by Wage with Smoothing Line', subtitle = 'As wage increases, joviality decreases across the different educational levels but is distorted by outliers',\n       y = \"Joviality\",\n       x = \"Wage\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nTogether with the histogram above, this chart above show that there are outliers in the data, where a number of yearly wage for individuals amount to <$3000. This is unusual. However, further investigation showed that these individuals were had household sizes of 2 or more, with those having household sizes of 3 were consistent with having kids. The logical explanation for this is that these are individuals who are married, and are either house-wives or house-husbands. The wage that is deposited into their accounts could be welfare from the state. As such, for future wage-related analysis, these outliers would be omitted.\n\n\nShow the code\n# Filtering outliers\ndf2 <- df1 %>%\n           filter ((Wage >= 3000))\n\n\nAfter the outliers have been removed, the following chart shows a clearer picture of the trend between wage and joviality:\n\n\nShow the code\nggplot(data=df2, \n       aes(x= Wage, \n           y=joviality, color = educationLevel)) +\n  geom_point() +\n  geom_smooth(size=0.5) +\n  theme_minimal() +\n  \n    labs(title = 'Scatterplot of Joviality levels by Wage with Smoothing Line', subtitle = 'A clearer view of how as wage increases, joviality decreases across the different educational level is shown in this chart',\n       y = \"Joviality\",\n       x = \"Wage\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nThis chart shows an interesting trend that is somewhat counter-intuitive: it seems that wage has a diminishing returns in joviality scores as wage increases across the education levels. It initially increases or starts off high as wage increases, before gradually slowing."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#confirmatory-data-analysis",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#confirmatory-data-analysis",
    "title": "Take-home Exercise 1",
    "section": "3.2 Confirmatory Data Analysis",
    "text": "3.2 Confirmatory Data Analysis\n\n3.2.1 Normality Tests\nGiven that joviality is the target variable, we perform the normality test on joviality scores of the participants:\nH0: The sample joviality data is not significantly different from a normal population\nH1: The sample joviality data is significantly different from a normal population\n\n\nShow the code\nqq <- ggplot(df1, \n       aes(sample=joviality)) +\n  stat_qq() +\n  stat_qq_line() \n\nsw_t <- df1 %>%\n  shapiro_test(joviality) %>%\n  gt()\n\ntmp <- tempfile(fileext = '.png')\ngtsave(sw_t, tmp)\ntable_png <- png::readPNG(tmp, native = TRUE)\n\nqq + table_png \n\n\n\n\n\nBased on the result above, the null hypothesis is rejected as the p-value below 0.05 critical value. As such, we are not able to confirm normality assumption for distribution of joviality as a target variable and future test would be non-parametric\n\n\n3.2.2 Regression Model with Joviality as the Target Variable\n\n\nShow the code\n# Linear Regression Models with Joviality as the Target Variable\nmodel <- lm(joviality ~ Education + Food + Recreation + \n              Shelter + Wage + RentAdjustment + householdSize + haveKids + age + educationLevel + interestGroup, data = df)\n\ncheck_c <- check_collinearity(model)\nplot(check_c)\n\n\n\n\n\nIn checking the collinearity, we determine which independent variables have correlation with the target variable joviality. As such, two variables ‘haveKids’ and ‘householdSize’ are deemed to have medium collinearity with joviality.\n\n\nShow the code\nggscatterstats(\n  data = df,\n  x = Recreation,\n  y = joviality,\n  marginal = FALSE,\n  )\n\n\n\n\n\n\n\nShow the code\nset.seed(123)\n\n# creating a plot\np <- ggscatterstats(\n  df2,\n  x = Wage,\n  y = joviality,\n  #label.var = educationLevel\n  #label.expression = Sepal.Length > 7.6\n) +\n  ggplot2::geom_rug(sides = \"b\")\n\n# looking at the plot\np\n\n\n\n\n\nShow the code\n# extracting details from statistical tests\nextract_stats(p)\n\n\n$subtitle_data\n# A tibble: 1 × 14\n  parameter1 parameter2 effectsize          estimate conf.level conf.low\n  <chr>      <chr>      <chr>                  <dbl>      <dbl>    <dbl>\n1 Wage       joviality  Pearson correlation   -0.296       0.95   -0.355\n  conf.high statistic df.error  p.value method              n.obs conf.method\n      <dbl>     <dbl>    <int>    <dbl> <chr>               <int> <chr>      \n1    -0.234     -9.18      878 3.03e-19 Pearson correlation   880 normal     \n  expression\n  <list>    \n1 <language>\n\n$caption_data\n# A tibble: 1 × 17\n  parameter1 parameter2 effectsize                   estimate conf.level\n  <chr>      <chr>      <chr>                           <dbl>      <dbl>\n1 Wage       joviality  Bayesian Pearson correlation   -0.295       0.95\n  conf.low conf.high    pd rope.percentage prior.distribution prior.location\n     <dbl>     <dbl> <dbl>           <dbl> <chr>                       <dbl>\n1   -0.357    -0.237     1               0 beta                         1.41\n  prior.scale    bf10 method                       n.obs conf.method expression\n        <dbl>   <dbl> <chr>                        <int> <chr>       <list>    \n1        1.41 1.36e16 Bayesian Pearson correlation   880 HDI         <language>\n\n$pairwise_comparisons_data\nNULL\n\n$descriptive_data\nNULL\n\n$one_sample_data\nNULL\n\n$tidy_data\nNULL\n\n$glance_data\nNULL\n\n\n\n\nSignificance of Education Level on Joviality\nUsing the violin plot charts visually depict the one-way annova test done on the variances in joviality among different educational level, we find that there is a statistical difference between the means of the different educational level group, with higher education levels having higher mean joviality scores. Intuitively, looking at the mean wages across the different educational level, the one-way annova test reveal that they are also statisically different, with higher educational levels, having higher mean wages.\n\n\nShow the code\n# Exploring the Variances between Wages for participants of different education levels\n\np1 <- ggbetweenstats(\n  data = df2,\n  x = educationLevel, \n  y = Wage,\n  grouping.var= category,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"s\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  title = \"Differences in wage for different education levels\",\n  package = \"ggthemes\", palette = \"Tableau_10\"\n)\n\np2 <- ggbetweenstats(\n  data = df2,\n  x = educationLevel, \n  y = joviality,\n  grouping.var= category,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"s\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  title = \"Differences in Joviality for different education levels\",\n  package = \"ggthemes\", palette = \"Tableau_10\"\n)\n\np2 + plot_annotation(\n  title = 'One-way Annova of Joviality across different Education Levels',\n  subtitle = 'There is significant difference between joviality of individuals of the different education levels, with more highly educated individuals having a higher likelihood of greater joviality',\n  theme = theme(plot.title = element_text(face = \"bold\", size = 18)))\n\n\n\n\n\nShow the code\np1 + plot_annotation(\n  title = 'One-way Annova of Yearly Wage across different Education Levels',\n  subtitle = 'There is significant difference between the yearly wage of individuals of the different education levels, with more highly educated individuals having a higher likelihood of better wages',\n  theme = theme(plot.title = element_text(face = \"bold\", size = 18)))\n\n\n\n\n\nHowever, the following chart (repeated from the EDA done above) shows a diminishing relationship - as wages increases, the joviality score decreases.\n\n\nShow the code\nggplot(data=df2, \n       aes(x= Wage, \n           y=joviality, color = educationLevel)) +\n  geom_point() +\n  geom_smooth(size=0.5) +\n  theme_minimal() +\n  \n    labs(title = 'Scatterplot of Joviality levels by Wage with Smoothing Line',\n       y = \"Joviality\",\n       x = \"Wage\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 12),\n  \n  axis.title.x = element_text(size = 10, hjust = 1),\n  axis.title.y = element_text(size = 10),\n  axis.text = element_text(size = 8))\n\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nInsight\n\nCity Planners should encourage residents to continually improve themselves, attaining the highest possible education level as possible. This can be done through subsidies for education, and well as policies to encourage workers in the workforce to upgrade themselves.\nChasing higher wages would not necessarily improve joviality. Therefore city planners should be cognisant of that in planning socio-economic policies - protecting and improving the lives of the bottom of society should be the focus rather than the middle to high income earners.\n\n\n\n\n\nShow the code\n# looking at the difference betwwen joviality by household size - there are differences\nggbetweenstats(\n  data = df,\n  x = householdSize, \n  y = joviality)+\n  theme_minimal()\n\n\n\n\n\n\n\nShow the code\n# looking at the difference between joviality by household size - not much difference\nggbetweenstats(\n  data = df,\n  x = haveKids, \n  y = joviality,\n  grouping.var= category,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"s\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  title = \"Differences in jovility between parents and non-parents\",\n  package = \"ggthemes\", palette = \"Tableau_10\"\n)\n\n\n\n\n\n\n\nShow the code\n# Filter the data based on the desired education level\nggplot(data=df1, \n            aes(x = Wage,\n                y = joviality, color = haveKids)) +\n  geom_point(size=1) + geom_smooth(data=df1, aes(x = Wage,\n                y = joviality, color = haveKids)) + \n  coord_cartesian(xlim=c(0,180000),\n                  ylim=c(0,1)) +\n  facet_wrap(~ educationLevel, nrow = 4)\n\n\n\n\n\n\n\nShow the code\n# Visual for Significant Test of Association between education level and joviality\ndf_mutated <- df1 %>% \n  mutate(joviality_bins = \n           cut(joviality, \n               breaks = c(0,0.25,0.5,0.75,100))\n)\n\nggbarstats(df_mutated, \n           x = joviality_bins, \n           y = educationLevel)\n\n\n\n\n\n\n\nSignificance of Expenditure on Recreation on Joviality\n\n\nShow the code\nggscatterstats(\n  data = df,\n  x = Recreation,\n  y = joviality,\n  marginal = FALSE,\n  ) + theme_minimal() + \n    labs(title = 'Correlation between Expenditure on Reacreation and Jovaility', subtitle = 'This chart shows that there is a 0.39 correlation between expenditure on recreation and joviality',\n       y = \"Joviality\",\n       x = \"Interest Group\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 14),\n  \n  axis.title.x = element_text(size = 12, hjust = 1),\n  axis.title.y = element_text(size = 12),\n  axis.text = element_text(size = 10),\n  legend.title = element_text(size = 10))\n\n\n\n\n\nWhile the above chart shows that there is a positive correlation between expenditure on recreation and joviality, we need to further divide the data to gain insights of greater fidelity.\n\n\nShow the code\nset.seed(123)\n\n# Plot of joviality vs expenditure on Recreation for Household Sizes \nggscatterstats(\n  df1,\n  x = Recreation,\n  y = joviality,\n\n) + theme_minimal() + \n    labs(title = 'Correlation between Expenditure on Reacreation and Jovaility by household size', subtitle = 'This chart shows the positive correlation between expenditure on recreation and joviality drops as household size increases',\n       y = \"Joviality\",\n       x = \"Interest Group\") +\n  ggplot2::geom_rug(sides = \"b\") + \n  facet_wrap(vars(householdSize))\n\n\n\n\n\nSpiltting the data by household size, this chart show comparing joviality against expenditure on recreation across the different household sizes show that there are diminishing effect on joviality for expenditure on recreation as the household size increases.\n\n\n\n\n\n\nImportant\n\n\n\nInsight\n\nTo improve the joviality level of singles, city planners can portion fund to build recreational facilities or encourage business owners to offer singles-friendly activities for this group of individuals to spend on recreation\n\n\n\n\n\nSignificance of Interest Group on Joviality\n\n\nShow the code\n# Visual for Significant Test of Association between Interest Group and Joviality bins\ndf_interest <- df1 %>% \n  mutate(joviality_bins = \n           cut(joviality, \n               breaks = c(0,0.25,0.5,0.75,100))\n         \n)\n\nggbarstats(df_interest, \n           x = joviality_bins, \n           y = interestGroup) +\n    theme_minimal() + \n    labs(title = 'Significant test of Association Joviality levels across Interest Groups', subtitle = 'This plot show that there are differences in proportion of binned joviality levels between the participants of the different interest groups',\n       y = \"Joviality\",\n       x = \"Interest Group\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 14),\n  \n  axis.title.x = element_text(size = 12, hjust = 1),\n  axis.title.y = element_text(size = 12),\n  axis.text = element_text(size = 10),\n  legend.title = element_text(size = 10))\n\n\n\n\n\nWith approximately an equal spread of participants across the various interest group, this visual explores the association between Interest Group and Joviality. Joviality values are binned into 4 equal group, with higher Joviality as more desirable. It is immediately apparent that two interest groups (C and E) are standouts with higher percentages of very high joviality (>0.75) in green.\n\n\nShow the code\n# looking at the difference between joviality by interest group - there are differences\nggbetweenstats(\n  data = df,\n  x = interestGroup, \n  y = joviality, palette = 'Paired') +\n  theme_minimal() + \n    labs(title = 'One-way Annova of Joviality levels across Interest Groups', subtitle = 'This plot show that there is a statistically significant variance for joviality between the participants of the different interest groups',\n       y = \"Joviality\",\n       x = \"Interest Group\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 14),\n  \n  axis.title.x = element_text(size = 12, hjust = 1),\n  axis.title.y = element_text(size = 12),\n  axis.text = element_text(size = 10),\n  legend.title = element_text(size = 10))\n\n\n\n\n\n\n\nShow the code\nt2.rect1 <- data.frame (xmin=0, xmax=0.5, ymin=-Inf, ymax=Inf)\n\nggplot(df1, aes(x = joviality, y = interestGroup, fill = educationLevel)) +\n  geom_density_ridges(alpha=0.6) +\n  theme_ridges() + \n  theme_minimal() + geom_rect(data=t2.rect1, aes(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax), fill=\"red\", alpha=0.25, inherit.aes = FALSE) +\n  \n    labs(title = 'Ridgeplot of Joviality levels by Education Level across Interest Groups', subtitle = 'This plot helps us visualise the peaks in the lower joviality segments of society across education levels and interest groups',\n       y = \"Interest Group\",\n       x = \"Joviality\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 14),\n  \n  axis.title.x = element_text(size = 12, hjust = 1),\n  axis.title.y = element_text(size = 12),\n  axis.text = element_text(size = 10),\n  legend.title = element_text(size = 10))\n\n\n\n\n\nShow the code\nggbarstats(df1, \n           x = educationLevel, \n           y = interestGroup) +\n  \n    labs(title = 'Plot of Significant Test of Association between Interest Group for different Education Levels', subtitle = 'This plot helps us visualise the proportions of Education Level segments across education levels and interest groups',\n       y = \"Proportion\",\n       x = \"Interest Group\") +\n  theme(plot.title = element_text(face = \"bold\", size = 14),\n  \n  axis.title.x = element_text(size = 12, hjust = 1),\n  axis.title.y = element_text(size = 12),\n  axis.text = element_text(size = 10),\n  legend.title = element_text(size = 10))\n\n\n\n\n\nLooking at the ridgeplot above which displays the joviality by interest groups, with the added fidelity of education level, a few patterns are apparent: there are noticeable peaks at the lower joviality levels of 0-0.5 (highlighted in the red box). These peaks occur for the segments Graduates in interest Group A and E, Bachelors in interest group H, and Low Education Levels in interest groups F, G and I.\n\n\n\n\n\n\nImportant\n\n\n\nInsight\n\nCity Planners can encourage residents to pick up interest groups C and E in a bid to improve Joviality levels. This can be done through subsidies for classes, or building more facilities for the above-mentioned interest groups.\nCity Planner can monitor and further investigate the following segments of the interest groups A, E, F, G, H and I to understand the underlying reasons for the higher percentages of low joviality levels among these segments:\n\nGraduates pursuing Interest Group A and E\nBachelors pursuing Interest Group H\nLow Education individuals pursuing Interest Group F\nLow Education individuals pursuing Interest Group G\nLow Education individuals pursuing Interest Group I\n\n\nThese segments can then be effectively targeted to encourage them to pursue other interest groups which have higher correlation to higher joviality. Similarly, this can be incentivised through subsidies, grants and/or greater accessibility.\n\n\n\n\n3.2.2 Visualising Uncertainty\nGiven that point estimates are not precise representation of the true data value, the following charts will help us to visualise the observed data, displaying the target quantile confidence levels (95%), and that the true (unknown) estimate will lie within this interval.\n\n\nShow the code\n# Base ggplot\nggplot(\n  data = df1,\n  aes(x = householdSize,\n      y = joviality)) +\n# Adding a gradient interval\n  stat_gradientinterval(   \n    fill = \"skyblue\",      \n    show.legend = TRUE) +\n  \n# Using stat_pointinterval to plot the points and intervals\n  stat_pointinterval(\n    aes(interval_color = stat(level)),\n    .width = c(0.95, 0.99),\n    .point = median,\n    .interval = qi,\n    point_color = \"darkred\",\n    show.legend = FALSE) +\n\n# Defining the color of the intervals \n  scale_color_manual(\n    values = c(\"blue2\", \"darkblue\"),\n    aesthetics = \"interval_color\") +\n  \n#Title and subtitle\n  labs(title = 'Visualising uncertainty in median estimates of Joviality by Household Size',\n  subtitle = 'Quantiles intervals (95% and 99%) of joviality levels by household size for the year',\n  x = \"Household Size\",\n  y = \"Joviality Level\") +\n  \n  theme_hc() +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(size = 12),\n  )\n\n\n\n\n\nThis plot shows that while the mean joviality level for married individuals (household size = 2) and married with kid (household size = 3) seems higher by the point estimate, there is an uncertainty associated with it and that it ranges in a band as depicted by the blue bar.\n\n\nShow the code\nlibrary(\"ungeviz\")\n\nggplot(data = df1, \n       (aes(x = factor(educationLevel), \n            y = joviality))) +\n  geom_point(position = position_jitter(\n    height = 0.3, \n    width = 0.05), \n    size = 0.4, \n    color = \"#0072B2\", \n    alpha = 1/2) +\n  geom_hpline(data = sampler(25, \n                             group = educationLevel), \n              height = 0.6, \n              color = \"#D55E00\") +\n  theme_bw() + \n  transition_states(.draw, 1, 3)\n\n\n\n\n\nThis plot also depicts the uncertainty involved in the segregating residents of the city by education level, that it cannot be said for certain that education level is a predictor of higher joviality given the uncertainty involved."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#the-task",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#the-task",
    "title": "Take-home Exercise 1",
    "section": "1.1 The Task",
    "text": "1.1 The Task\nThe task is to apply the appropriate visual analytics concepts and methods to reveal the demographic and financial characteristics of the city of Engagement, using appropriate static and interactive statistical graphics methods. This exercise requires a user-friendly and interactive solution that helps city managers and planners to explore the complex data in an engaging way and reveal hidden patterns. The data should be processed by using appropriate tidyverse family of packages and the statistical graphics must be prepared using ggplot2 and its extensions."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#the-data",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#the-data",
    "title": "Take-home Exercise 1",
    "section": "1.2 The Data",
    "text": "1.2 The Data\nParticipants.csv contains information about the residents of City of Engagement that have agreed to participate in this study. The data consist of 1,011 rows and 7 columns.\n\n\n\n\n\n\n\nColumns\nDescription\n\n\n\n\nparticipantId (integer)\nunique ID assigned to each participant\n\n\nhouseholdSize (integer)\nthe number of people in the participant’s household\n\n\nhaveKids (boolean)\nwhether there are children living in the participant’s household\n\n\nage (integer)\nparticipant’s age in years at the start of the study\n\n\neducationLevel (string factor)\nthe participant’s education level, one of: {“Low”, “HighSchoolOrCollege”, “Bachelors”, “Graduate”\n\n\ninterestGroup (char)\na char representing the participant’s stated primary interest group, one of {“A”, “B”, “C”, “D”, “E”, “F”, “G”, “H”, “I”, “J”}. Note: specific topics of interest have been redacted to avoid bias\n\n\njoviality (float)\na value ranging from [0,1] indicating the participant’s overall happiness level at the start of the study\n\n\n\nFinancialJournal.csv contains information about financial transactions of the participants. The data consist of 1,513,636 rows and 4 columns.\n\n\n\n\n\n\n\nColumns\nDescription\n\n\n\n\nparticipantId (integer)\nunique ID corresponding to the participant affected\n\n\ntimestamp (datetime)\nthe time when the check-in was logged\n\n\ncategory (string factor)\na string describing the expense category, one of {“Education”, “Food”, “Recreation”, “RentAdjustment”, “Shelter”, “Wage”}\n\n\namount (double)\nthe amount of the transaction"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex05/In-class_Ex05.html",
    "href": "In-class_Ex/In-class_Ex05/In-class_Ex05.html",
    "title": "In-class Exercise 5",
    "section": "",
    "text": "Show the code\npacman::p_load(igraph, tidygraph, ggraph, \n               visNetwork, lubridate, clock,\n               tidyverse, graphlayouts)\n\n\n\n\nShow the code\nGAStech_nodes <- read_csv(\"data/GAStech_email_node.csv\")\nGAStech_edges <- read_csv(\"data/GAStech_email_edge-v2.csv\")\n\n\n\n\nShow the code\nglimpse(GAStech_edges)\n\n\nRows: 9,063\nColumns: 8\n$ source      <dbl> 43, 43, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 26, 26, 26…\n$ target      <dbl> 41, 40, 51, 52, 53, 45, 44, 46, 48, 49, 47, 54, 27, 28, 29…\n$ SentDate    <chr> \"6/1/2014\", \"6/1/2014\", \"6/1/2014\", \"6/1/2014\", \"6/1/2014\"…\n$ SentTime    <time> 08:39:00, 08:39:00, 08:58:00, 08:58:00, 08:58:00, 08:58:0…\n$ Subject     <chr> \"GT-SeismicProcessorPro Bug Report\", \"GT-SeismicProcessorP…\n$ MainSubject <chr> \"Work related\", \"Work related\", \"Work related\", \"Work rela…\n$ sourceLabel <chr> \"Sven.Flecha\", \"Sven.Flecha\", \"Kanon.Herrero\", \"Kanon.Herr…\n$ targetLabel <chr> \"Isak.Baza\", \"Lucas.Alcazar\", \"Felix.Resumir\", \"Hideki.Coc…\n\n\n\n\nShow the code\nGAStech_edges <- GAStech_edges %>%\n  mutate(SendDate = dmy(SentDate)) %>%\n  mutate(Weekday = wday(SentDate,\n                        label = TRUE,\n                        abbr = FALSE))\n\n\n\n\nShow the code\nGAStech_edges_aggregated <- GAStech_edges %>%\n  filter(MainSubject == \"Work related\") %>%\n  group_by(source, target, Weekday) %>%\n    summarise(Weight = n()) %>%\n  filter(source!=target) %>%\n  filter(Weight > 1) %>%\n  ungroup()\n\n\n\n\nShow the code\nGAStech_graph <- tbl_graph(nodes = GAStech_nodes,\n                           edges = GAStech_edges_aggregated, \n                           directed = TRUE)\n\nGAStech_graph\n\n\n# A tbl_graph: 54 nodes and 1372 edges\n#\n# A directed multigraph with 1 component\n#\n# A tibble: 54 × 4\n     id label               Department     Title                                \n  <dbl> <chr>               <chr>          <chr>                                \n1     1 Mat.Bramar          Administration Assistant to CEO                     \n2     2 Anda.Ribera         Administration Assistant to CFO                     \n3     3 Rachel.Pantanal     Administration Assistant to CIO                     \n4     4 Linda.Lagos         Administration Assistant to COO                     \n5     5 Ruscella.Mies.Haber Administration Assistant to Engineering Group Manag…\n6     6 Carla.Forluniau     Administration Assistant to IT Group Manager        \n# … with 48 more rows\n#\n# A tibble: 1,372 × 4\n   from    to Weekday Weight\n  <int> <int> <ord>    <int>\n1     1     2 Sunday       5\n2     1     2 Monday       2\n3     1     2 Tuesday      3\n# … with 1,369 more rows\n\n\n\n\nShow the code\nGAStech_graph %>%\n  activate(edges) %>%\n  arrange(desc(Weight))\n\n\n# A tbl_graph: 54 nodes and 1372 edges\n#\n# A directed multigraph with 1 component\n#\n# A tibble: 1,372 × 4\n   from    to Weekday  Weight\n  <int> <int> <ord>     <int>\n1    40    41 Saturday     13\n2    41    43 Monday       11\n3    35    31 Tuesday      10\n4    40    41 Monday       10\n5    40    43 Monday       10\n6    36    32 Sunday        9\n# … with 1,366 more rows\n#\n# A tibble: 54 × 4\n     id label           Department     Title           \n  <dbl> <chr>           <chr>          <chr>           \n1     1 Mat.Bramar      Administration Assistant to CEO\n2     2 Anda.Ribera     Administration Assistant to CFO\n3     3 Rachel.Pantanal Administration Assistant to CIO\n# … with 51 more rows\n\n\nPlotting a basic network graph\n\n\nShow the code\nggraph(GAStech_graph) +\n  geom_edge_link() +\n  geom_node_point()\n\n\n\n\n\nNetwork Graph with graph theme and custom colour\n\n\nShow the code\ng <- ggraph(GAStech_graph) + \n  geom_edge_link(aes(colour = 'grey50')) +\n  geom_node_point(aes(colour = 'grey40'))\n\ng + theme_graph(background = 'grey10',\n                text_colour = 'white')\n\n\n\n\n\nFruchterman and Reingold layout\n\n\nShow the code\ng <- ggraph(GAStech_graph, \n            layout = \"fr\") +\n  geom_edge_link(aes()) +\n  geom_node_point(aes())\n\ng + theme_graph()\n\n\n\n\n\nModifying network nodes to display respective departments\n\n\nShow the code\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes()) +\n  geom_node_point(aes(colour = Department, \n                      size = 3))\n\ng + theme_graph()\n\n\n\n\n\nModifying Edges to display weight\n\n\nShow the code\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") +\n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department), \n                  size = 3)\n\ng + theme_graph()\n\n\n\n\n\nWorking with facet edges (day of week)\n\n\nShow the code\nset_graph_style()\n\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department), \n                  size = 2)\n\ng + facet_edges(~Weekday)\n\n\n\n\n\nFramed facet graph with legend at the bottom using theme()\n\n\nShow the code\nset_graph_style() \n\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department), \n                  size = 2)\n  \ng + facet_edges(~Weekday) +\n  th_foreground(foreground = \"grey80\",  \n                border = TRUE) +\n  theme(legend.position = 'bottom')\n\n\n\n\n\nWorking with facet nodes\n\n\nShow the code\nset_graph_style()\n\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department), \n                  size = 2)\n  \ng + facet_nodes(~Department)+\n  th_foreground(foreground = \"grey80\",  \n                border = TRUE) +\n  theme(legend.position = 'bottom')\n\n\n\n\n\nMeasuring centrality\n\n\nShow the code\ng <- GAStech_graph %>%\n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department, \n                      size = centrality_betweenness()))\ng + theme_graph()\n\n\n\n\n\nVisualising community through grouped edge between\n\n\nShow the code\ng <- GAStech_graph %>%\n  mutate(community = as.factor(group_edge_betweenness(weights = Weight, directed = TRUE))) %>%\n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = community))  \n\ng + theme_graph()\n\n\n\n\n\nData Prep to use visNetwork\n\n\nShow the code\nGAStech_edges_aggregated <- GAStech_edges %>%\n  left_join(GAStech_nodes, by = c(\"sourceLabel\" = \"label\")) %>%\n  rename(from = id) %>%\n  left_join(GAStech_nodes, by = c(\"targetLabel\" = \"label\")) %>%\n  rename(to = id) %>%\n  filter(MainSubject == \"Work related\") %>%\n  group_by(from, to) %>%\n    summarise(weight = n()) %>%\n  filter(from!=to) %>%\n  filter(weight > 1) %>%\n  ungroup()\n\n\nInteractive network graph\n\n\nShow the code\nvisNetwork(GAStech_nodes,\n           GAStech_edges_aggregated) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visOptions(highlightNearest = TRUE,\n             nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "title": "Take-home Exercise 2 - MC2",
    "section": "",
    "text": "The country of Oceanus has sought FishEye International’s help in identifying companies possibly engaged in illegal, unreported, and unregulated (IUU) fishing. As part of the collaboration, FishEye’s analysts received import/export data for Oceanus’ marine and fishing industries. However, Oceanus has informed FishEye that the data is incomplete. To facilitate their analysis, FishEye transformed the trade data into a knowledge graph. Using this knowledge graph, they hope to understand business relationships, including finding links that will help them stop IUU fishing and protect marine species that are affected by it. FishEye analysts found that node-link diagrams gave them a good high-level overview of the knowledge graph. However, they are now looking for visualizations that provide more detail about patterns for entities in the knowledge graph\n\n\n\nUse visual analytics to identify temporal patterns for individual entities and between entities in the knowledge graph FishEye created from trade records. Categorize the types of business relationship patterns you find. Limit your response to 600 words and 6 images."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#confirmatory-data-analysis-and-insights",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#confirmatory-data-analysis-and-insights",
    "title": "Take-home Exercise 1",
    "section": "3.2 Confirmatory Data Analysis and Insights",
    "text": "3.2 Confirmatory Data Analysis and Insights\n\n3.2.1 Normality Tests\nGiven that joviality is the target variable, we perform the normality test on joviality scores of the participants:\nH0: The sample joviality data is not significantly different from a normal population\nH1: The sample joviality data is significantly different from a normal population\n\n\nShow the code\nqq <- ggplot(df1, \n       aes(sample=joviality)) +\n  stat_qq() +\n  stat_qq_line() + theme_minimal() +\n    labs(title = 'Normality test using QQ plot of the Joviality variable', subtitle = 'Joviality does not follow a normal distribution',\n       y = \"Joviality\",\n       x = \"Wage\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\nsw_t <- df1 %>%\n  shapiro_test(joviality) %>%\n  gt()\n\ntmp <- tempfile(fileext = '.png')\ngtsave(sw_t, tmp)\ntable_png <- png::readPNG(tmp, native = TRUE)\n\nqq + table_png \n\n\n\n\n\nBased on the result above, the null hypothesis is rejected as the p-value below 0.05 critical value. As such, we are not able to confirm normality assumption for distribution of joviality as a target variable and future test would be non-parametric\n\n\n3.2.2 Regression Model with Joviality as the Target Variable\n\n\nShow the code\n# Linear Regression Models with Joviality as the Target Variable\nmodel <- lm(joviality ~ Education + Food + Recreation + \n              Shelter + Wage + RentAdjustment + householdSize + haveKids + age + educationLevel + interestGroup, data = df)\n\ncheck_c <- check_collinearity(model)\nplot(check_c)\n\n\n\n\n\nIn checking the collinearity, we determine which independent variables have correlation with the target variable joviality. As such, two variables ‘haveKids’ and ‘householdSize’ are deemed to have medium collinearity with joviality.\n\n\n3.2.3 Significance of Education Level on Joviality\nUsing the violin plot charts visually depict the one-way annova test done on the variances in joviality among different educational level, we find that there is a statistical difference between the means of the different educational level group, with higher education levels having higher mean joviality scores. Intuitively, looking at the mean wages across the different educational level, the one-way annova test reveal that they are also statisically different, with higher educational levels, having higher mean wages.\n\n\nShow the code\n# Exploring the Variances between Wages for participants of different education levels\n\np1 <- ggbetweenstats(\n  data = df2,\n  x = educationLevel, \n  y = Wage,\n  grouping.var= category,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"s\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  title = \"Differences in wage for different education levels\",\n  package = \"ggthemes\", palette = \"Tableau_10\"\n)\n\np2 <- ggbetweenstats(\n  data = df2,\n  x = educationLevel, \n  y = joviality,\n  grouping.var= category,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"s\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  title = \"Differences in Joviality for different education levels\",\n  package = \"ggthemes\", palette = \"Tableau_10\"\n)\n\np2 + plot_annotation(\n  title = 'One-way Annova of Joviality across different Education Levels',\n  subtitle = 'There is significant difference between joviality of individuals of the different education levels, with more highly educated individuals having a higher likelihood of greater joviality',\n  theme = theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18), axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14)))\n\n\n\n\n\nShow the code\np1 + plot_annotation(\n  title = 'One-way Annova of Yearly Wage across different Education Levels',\n  subtitle = 'There is significant difference between the yearly wage of individuals of the different education levels, with more highly educated individuals having a higher likelihood of better wages',\n  theme = theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18), axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14)))\n\n\n\n\n\nHowever, the following chart (repeated from the EDA done above) shows a diminishing relationship - as wages increases, the joviality score decreases.\n\n\nShow the code\nggplot(data=df2, \n       aes(x= Wage, \n           y=joviality, color = educationLevel)) +\n  geom_point() +\n  geom_smooth(size=0.5) +\n  theme_minimal() +\n  \n    labs(title = 'Scatterplot of Joviality levels by Wage with Smoothing Line',\n       y = \"Joviality\",\n       x = \"Wage\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nInsight\n\nCity Planners should encourage residents to continually improve themselves, attaining the highest possible education level as possible. This can be done through subsidies for education, and well as policies to encourage workers in the workforce to upgrade themselves.\nChasing higher wages would not necessarily improve joviality. Therefore city planners should be cognisant of that in planning socio-economic policies - protecting and improving the lives of the bottom of society should be the focus rather than the middle to high income earners.\n\n\n\n\n\n3.2.4 Significance of Shelter on Joviality\n\n\nShow the code\nz <- ggplot(data=df2, \n            aes(x = Shelter,\n                y = joviality, color = householdSize, palette = \"Tableau_10\", size = RentAdjustment)) + \n  geom_point() +\n  coord_cartesian(xlim=c(-20000,0),\n                  ylim=c(0,1)) +\n  theme_minimal() + \n  labs(title = 'Interactive Plot of Expenditure on Shelter vs Joviality by Household Size (color) and Rent Adjustment (size)',\n  x = \"Expenditure on Shelter\",\n  y = \"Joviality Level\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 18), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14)) \n\nggplotly(z)\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nInsight\n\nWith Rent Adjustment values seemingly associated with high joviality, especially those who spendd significantly on Shelter to house their larger families, city planners can rework the disbursement of rent adjustment for individuals with larger families (especially those with lower incomes), to reduce the financial burden, and improve joviality among its residents.\n\n\n\n\n\n3.2.5 Significance of Expenditure on Recreation on Joviality\n\n\nShow the code\nggscatterstats(\n  data = df,\n  x = Recreation,\n  y = joviality,\n  marginal = FALSE,\n  ) + theme_minimal() + \n    labs(title = 'Correlation between Expenditure on Recreation and Jovaility', subtitle = 'This chart shows that there is a 0.39 correlation between expenditure on recreation and joviality',\n       y = \"Joviality\",\n       x = \"Recreation\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nWhile the above chart shows that there is a positive correlation between expenditure on recreation and joviality, we need to further divide the data to gain insights of greater fidelity.\n\n\nShow the code\nset.seed(123)\n\n# Plot of joviality vs expenditure on Recreation for Household Sizes \nggscatterstats(\n  df1,\n  x = Recreation,\n  y = joviality,\n\n) + theme_minimal() + \n    labs(title = 'Correlation between Expenditure on Reacreation and Jovaility by household size', subtitle = 'This chart shows the positive correlation between expenditure on recreation and joviality drops as household size increases',\n       y = \"Joviality\",\n       x = \"Recreation\") +\n  ggplot2::geom_rug(sides = \"b\") + \n  facet_wrap(vars(householdSize)) + theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nSpiltting the data by household size, this chart show comparing joviality against expenditure on recreation across the different household sizes show that there are diminishing effect on joviality for expenditure on recreation as the household size increases.\n\n\n\n\n\n\nImportant\n\n\n\nInsight\n\nTo improve the joviality level of singles, city planners can portion fund to build recreational facilities or encourage business owners to offer singles-friendly activities for this group of individuals to spend on recreation\n\n\n\n\n\n3.2.6 Significance of Interest Group on Joviality\n\n\nShow the code\n# Visual for Significant Test of Association between Interest Group and Joviality bins\ndf_interest <- df1 %>% \n  mutate(joviality_bins = \n           cut(joviality, \n               breaks = c(0,0.25,0.5,0.75,100))\n         \n)\n\nggbarstats(df_interest, \n           x = joviality_bins, \n           y = interestGroup) +\n    theme_minimal() + \n    labs(title = 'Significant test of Association Joviality levels across Interest Groups', subtitle = 'This plot show that there are differences in proportion of binned joviality levels between the participants of the different interest groups',\n       y = \"Joviality\",\n       x = \"Interest Group\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nWith approximately an equal spread of participants across the various interest group, this visual explores the association between Interest Group and Joviality. Joviality values are binned into 4 equal group, with higher Joviality as more desirable. It is immediately apparent that two interest groups (C and E) are standouts with higher percentages of very high joviality (>0.75) in green.\n\n\nShow the code\n# looking at the difference between joviality by interest group - there are differences\nggbetweenstats(\n  data = df,\n  x = interestGroup, \n  y = joviality, palette = 'Paired') +\n  theme_minimal() + \n    labs(title = 'One-way Annova of Joviality levels across Interest Groups', subtitle = 'This plot show that there is a statistically significant variance for joviality between the participants of the different interest groups',\n       y = \"Joviality\",\n       x = \"Interest Group\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\n\n\nShow the code\nt2.rect1 <- data.frame (xmin=0, xmax=0.5, ymin=-Inf, ymax=Inf)\n\nggplot(df1, aes(x = joviality, y = interestGroup, fill = educationLevel)) +\n  geom_density_ridges(alpha=0.6) +\n  theme_ridges() + \n  theme_minimal() + geom_rect(data=t2.rect1, aes(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax), fill=\"red\", alpha=0.25, inherit.aes = FALSE) +\n  \n    labs(title = 'Ridgeplot of Joviality levels by Education Level across Interest Groups', subtitle = 'This plot helps us visualise the peaks in the lower joviality segments of society across education levels and interest groups',\n       y = \"Interest Group\",\n       x = \"Joviality\") +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nShow the code\nggbarstats(df1, \n           x = educationLevel, \n           y = interestGroup) +\n  \n    labs(title = 'Plot of Significant Test of Association between Interest Group for different Education Levels', subtitle = 'This plot helps us visualise the proportions of Education Level segments across education levels and interest groups',\n       y = \"Proportion\",\n       x = \"Interest Group\") +\n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nLooking at the ridgeplot above which displays the joviality by interest groups, with the added fidelity of education level, a few patterns are apparent: there are noticeable peaks at the lower joviality levels of 0-0.5 (highlighted in the red box). These peaks occur for the segments Graduates in interest Group A and E, Bachelors in interest group H, and Low Education Levels in interest groups F, G and I.\n\n\n\n\n\n\nImportant\n\n\n\nInsight\n\nCity Planners can encourage residents to pick up interest groups C and E in a bid to improve Joviality levels. This can be done through subsidies for classes, or building more facilities for the above-mentioned interest groups.\nCity Planner can monitor and further investigate the following segments of the interest groups A, E, F, G, H and I to understand the underlying reasons for the higher percentages of low joviality levels among these segments:\n\nGraduates pursuing Interest Group A and E\nBachelors pursuing Interest Group H\nLow Education individuals pursuing Interest Group F\nLow Education individuals pursuing Interest Group G\nLow Education individuals pursuing Interest Group I\n\n\nThese segments can then be effectively targeted to encourage them to pursue other interest groups which have higher correlation to higher joviality. Similarly, this can be incentivised through subsidies, grants and/or greater accessibility.\n\n\n\n\n3.2.7 Visualising Uncertainty\nGiven that point estimates are not precise representation of the true data value, the following charts will help us to visualise the observed data, displaying the target quantile confidence levels (95%), and that the true (unknown) estimate will lie within this interval.\n\n\nShow the code\n# Base ggplot\nggplot(\n  data = df1,\n  aes(x = householdSize,\n      y = joviality)) +\n# Adding a gradient interval\n  stat_gradientinterval(   \n    fill = \"skyblue\",      \n    show.legend = TRUE) +\n  \n# Using stat_pointinterval to plot the points and intervals\n  stat_pointinterval(\n    aes(interval_color = stat(level)),\n    .width = c(0.95, 0.99),\n    .point = median,\n    .interval = qi,\n    point_color = \"darkred\",\n    show.legend = FALSE) +\n\n# Defining the color of the intervals \n  scale_color_manual(\n    values = c(\"blue2\", \"darkblue\"),\n    aesthetics = \"interval_color\") +\n  \n#Title and subtitle\n  labs(title = 'Visualising uncertainty in median estimates of Joviality by Household Size',\n  subtitle = 'Quantiles intervals (95% and 99%) of joviality levels by household size for the year',\n  x = \"Household Size\",\n  y = \"Joviality Level\") +\n  \n  theme_hc() +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nThis plot shows that while the mean joviality level for married individuals (household size = 2) and married with kid (household size = 3) seems higher by the point estimate, there is an uncertainty associated with it and that it ranges in a band as depicted by the blue bar.\n\n\nShow the code\nlibrary(\"ungeviz\")\n\nggplot(data = df1, \n       (aes(x = factor(educationLevel), \n            y = joviality))) +\n  geom_point(position = position_jitter(\n    height = 0.3, \n    width = 0.05), \n    size = 0.4, \n    color = \"#0072B2\", \n    alpha = 1/2) +\n  geom_hpline(data = sampler(25, \n                             group = educationLevel), \n              height = 0.6, \n              color = \"#D55E00\") +\n  theme_bw() + labs(title = 'Visualising uncertainty in median estimates of Joviality by Education Level',\n  subtitle = 'Quantiles intervals (95% and 99%) of joviality levels by education level for the year',\n  x = \"Education Level\",\n  y = \"Joviality Level\") +\n  transition_states(.draw, 1, 3)+ theme(plot.title = element_text(face = \"bold\", size = 24), plot.subtitle = element_text(size = 18),\n  \n  axis.title.x = element_text(size = 20, hjust = 1),\n  axis.title.y = element_text(size = 20),\n  axis.text = element_text(size = 14))\n\n\n\n\n\nThis plot also depicts the uncertainty involved in the segregating residents of the city by education level, that it cannot be said for certain that education level is a predictor of higher joviality given the uncertainty involved."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ISSS608-VAA",
    "section": "",
    "text": "Welcome to ISSS608 Visual Analytics and Applications. In this website, you will find my sweat and blood coursework prepared for this course.\n\n\n\n“If data is the new gold, then visual analytics is the refiner’s fire” - Anon"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#loading-the-requisite-r-libraries",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#loading-the-requisite-r-libraries",
    "title": "Take-home Exercise 2 - MC2",
    "section": "2.1 Loading the requisite R libraries:",
    "text": "2.1 Loading the requisite R libraries:\n\n\nShow the code\npacman::p_load(jsonlite, lubridate, tidyverse, tidygraph, ggraph, visNetwork)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#importing-the-requisite-json-files.-for-minicase-2-there-is-the-large-dataset-mc2-and-the-12-individual-datasets-from-the-bundle-date-of-the-different-individual-fish-species.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#importing-the-requisite-json-files.-for-minicase-2-there-is-the-large-dataset-mc2-and-the-12-individual-datasets-from-the-bundle-date-of-the-different-individual-fish-species.",
    "title": "Take-home Exercise 2 - MC2",
    "section": "2.2 Importing the requisite JSON files. For minicase 2, there is the large dataset “MC2”, and the 12 individual datasets from the bundle date of the different individual fish species.",
    "text": "2.2 Importing the requisite JSON files. For minicase 2, there is the large dataset “MC2”, and the 12 individual datasets from the bundle date of the different individual fish species.\n\n\nShow the code\nMC2 <- jsonlite::fromJSON(\"data/mc2_challenge_graph.json\")\n\n\n\n\nShow the code\ntuna <- jsonlite::fromJSON(\"data/bundles/tuna.json\")\nshark <- jsonlite::fromJSON(\"data/bundles/shark.json\")\nsalmon <- jsonlite::fromJSON(\"data/bundles/salmon.json\")\nsalmon_wgl <- jsonlite::fromJSON(\"data/bundles/salmon_wgl.json\")\npollock <- jsonlite::fromJSON(\"data/bundles/pollock.json\")\nmackerel <- jsonlite::fromJSON(\"data/bundles/mackerel.json\")\nlichen <- jsonlite::fromJSON(\"data/bundles/lichen.json\")\nherring <- jsonlite::fromJSON(\"data/bundles/herring.json\")\ncod2 <- jsonlite::fromJSON(\"data/bundles/cod2.json\")\nchub_mackerel <- jsonlite::fromJSON(\"data/bundles/chub_mackerel.json\")\ncatfish <- jsonlite::fromJSON(\"data/bundles/catfish.json\")\ncarp <- jsonlite::fromJSON(\"data/bundles/carp.json\")\n\n\nTaking a look at the MC2 dataset:\n\n\nShow the code\nglimpse(MC2)\n\n\nList of 5\n $ directed  : logi TRUE\n $ multigraph: logi TRUE\n $ graph     : Named list()\n $ nodes     :'data.frame': 34576 obs. of  4 variables:\n  ..$ shpcountry: chr [1:34576] \"Polarinda\" NA \"Oceanus\" NA ...\n  ..$ rcvcountry: chr [1:34576] \"Oceanus\" NA \"Oceanus\" NA ...\n  ..$ dataset   : chr [1:34576] \"MC2\" \"MC2\" \"MC2\" \"MC2\" ...\n  ..$ id        : chr [1:34576] \"AquaDelight Inc and Son's\" \"BaringoAmerica Marine Ges.m.b.H.\" \"Yu gan  Sea spray GmbH Industrial\" \"FlounderLeska Marine BV\" ...\n $ links     :'data.frame': 5464378 obs. of  9 variables:\n  ..$ arrivaldate     : chr [1:5464378] \"2034-02-12\" \"2034-03-13\" \"2028-02-07\" \"2028-02-23\" ...\n  ..$ hscode          : chr [1:5464378] \"630630\" \"630630\" \"470710\" \"470710\" ...\n  ..$ valueofgoods_omu: num [1:5464378] 141015 141015 NA NA NA ...\n  ..$ volumeteu       : num [1:5464378] 0 0 0 0 0 0 0 0 0 0 ...\n  ..$ weightkg        : int [1:5464378] 4780 6125 10855 11250 11165 11290 9000 19490 6865 19065 ...\n  ..$ dataset         : chr [1:5464378] \"MC2\" \"MC2\" \"MC2\" \"MC2\" ...\n  ..$ source          : chr [1:5464378] \"AquaDelight Inc and Son's\" \"AquaDelight Inc and Son's\" \"AquaDelight Inc and Son's\" \"AquaDelight Inc and Son's\" ...\n  ..$ target          : chr [1:5464378] \"BaringoAmerica Marine Ges.m.b.H.\" \"BaringoAmerica Marine Ges.m.b.H.\" \"-15045\" \"-15045\" ...\n  ..$ valueofgoodsusd : num [1:5464378] NA NA NA NA NA ...\n\n\n\n\n\n\n\n\nNote\n\n\n\nA quick glimpse of the data reveals that the bundles data is breakdown of the shipments of the different species of fishes, for the year 2034 only, while MC2 data is the aggregated shipment of fish for the years 2028 - 2034.\nAs such, the approach in tackling the task would be to investigate the smaller bundles data first for clues, which would narrow down and scope the subsequent analysis when tackling the much larger MC2 data set."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#wrangling-the-data",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#wrangling-the-data",
    "title": "Take-home Exercise 2 - MC2",
    "section": "2.3 Wrangling the data:",
    "text": "2.3 Wrangling the data:\n\n2.3.1 Creating the tibble of nodes:\n\n\nShow the code\nMC2_nodes <- as_tibble(MC2$nodes) %>%\n  select(id, shpcountry, rcvcountry)\n\n\n\n\n2.3.2 Creating the tibble of edges\nThis is done by mutating the dates (into month_year format), then aggregating the edges by source and target to determine the weight of each edge. As there were many obscure connections between nodes with low frequencies, a cutoff set at edge weight > 1000 was arbitrary set. This would give us the top 100+ connections.\n\n\nShow the code\nMC2_edges <- as_tibble(MC2$links) %>%\n  mutate(arrivaldate = ymd(arrivaldate)) %>%\n  mutate(monthyear = format(arrivaldate, \"%B %Y\")) %>%\n  mutate(year = year(arrivaldate)) %>%\n  select(source, target, hscode, weightkg, volumeteu, arrivaldate, monthyear, year, valueofgoods_omu, valueofgoodsusd) %>%\n  distinct()\n\nMC2_edges_aggregated <- MC2_edges %>%\n  group_by(source, target, hscode, year) %>%\n    summarise(Weight = n()) %>%\n  filter(source!=target) %>%\n  filter(Weight > 1000) %>%\n  ungroup()\n\n\n\n\n2.3.3 Checking for Missing Values\n\n\nShow the code\n# Checking the number of missing values in each column \nsum(is.na(MC2_edges$arrivaldate))\n\n\n[1] 0\n\n\nShow the code\nsum(is.na(MC2_edges$hscode))\n\n\n[1] 0\n\n\nShow the code\nsum(is.na(MC2_edges$weightkg))\n\n\n[1] 0\n\n\nShow the code\nsum(is.na(MC2_edges$volumeteu))\n\n\n[1] 498081\n\n\nShow the code\nsum(is.na(MC2_edges$valueofgoods_omu))\n\n\n[1] 5308806\n\n\nShow the code\nsum(is.na(MC2_edges$valueofgoodsusd))\n\n\n[1] 2886255\n\n\nThe number of missing values in the “valueofgoods_omu” and “valueofgoodsusd” columns appear to be more than 50%. Additionally, the “volumeteu” has 520933 (out of ~5 million) missing values, and since weightkg provides a good proxy, these columns will be omitted from subsequent analysis.\n\n\n2.3.4 Nodes Table\nWe next prepare a new nodes data table by using the source and target fields of mc2_edges_aggregated data table. This is necessary to ensure that the nodes in nodes data tables include all the source and target values.\n\n\nShow the code\nid1 <- MC2_edges_aggregated %>%\n  select(source) %>%\n  rename(id = source)\nid2 <- MC2_edges_aggregated %>%\n  select(target) %>%\n  rename(id = target)\nMC2_nodes_extracted <- rbind(id1, id2) %>%\n  distinct()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#exploring-the-individual-fish-species-in-the-bundles-dataset---tuna",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#exploring-the-individual-fish-species-in-the-bundles-dataset---tuna",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.1 Exploring the individual fish species in the bundles dataset - Tuna",
    "text": "3.1 Exploring the individual fish species in the bundles dataset - Tuna\nThe tuna dataset was the most interesting for the year 2034. As such, the data wrangling for the tuna data set was done in a similar fashion as the MC2 dataset. However, as the dataset is smaller, additional fidelity of the shipments by monthyear was coded in.\n\n\nShow the code\n# Tuna Data Wrangling\ntuna_nodes <- as_tibble(tuna$nodes) %>%\n  select(id, shpcountry, rcvcountry)\n\ntuna_edges <- as_tibble(tuna$links) %>%\n  mutate(arrivaldate = ymd(arrivaldate)) %>%\n  mutate(monthyear = format(arrivaldate, \"%B %Y\")) %>%\n  mutate(year = year(arrivaldate)) %>%\n  select(source, target, hscode, arrivaldate, monthyear, valueofgoods_omu)\n\ntuna_edges_aggregated <- tuna_edges %>%\n  group_by(source, target, monthyear) %>%\n    summarise(Weight = n()) %>%\n  filter(source!=target) %>%\n  filter(Weight > 1) %>%\n  ungroup()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#using-tbl_graphs-for-the-tuna-dataset.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#using-tbl_graphs-for-the-tuna-dataset.",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.1.1 Using tbl_graphs for the Tuna dataset.",
    "text": "3.1.1 Using tbl_graphs for the Tuna dataset.\n\n\nShow the code\n#Preparing of Tuna Graphs\ntuna_graph <- tbl_graph(nodes = tuna_nodes,\n                        edges = tuna_edges_aggregated, \n                        directed = TRUE)\n\ntuna_graph %>%\n  activate(edges) %>%\n  arrange(desc(Weight))\n\n\n# A tbl_graph: 29 nodes and 28 edges\n#\n# A directed acyclic multigraph with 8 components\n#\n# A tibble: 28 × 4\n   from    to monthyear      Weight\n  <int> <int> <chr>           <int>\n1     1     2 August 2034        58\n2     1     2 September 2034     36\n3    12    13 October 2034       15\n4     3     4 September 2034     12\n5     5    19 November 2034      11\n6     1     2 October 2034       10\n# ℹ 22 more rows\n#\n# A tibble: 29 × 3\n  id                               shpcountry rcvcountry\n  <chr>                            <chr>      <chr>     \n1 Andhra Pradesh  Sp Worldwide     Utoporiana <NA>      \n2 Jharkhand Sea  S.p.A. United     <NA>       -27       \n3 Dutch Mussels Pic Marine biology Rio Isla   -27       \n# ℹ 26 more rows\n\n\nShow the code\ntuna_graph\n\n\n# A tbl_graph: 29 nodes and 28 edges\n#\n# A directed acyclic multigraph with 8 components\n#\n# A tibble: 29 × 3\n  id                                            shpcountry rcvcountry\n  <chr>                                         <chr>      <chr>     \n1 Andhra Pradesh  Sp Worldwide                  Utoporiana <NA>      \n2 Jharkhand Sea  S.p.A. United                  <NA>       -27       \n3 Dutch Mussels Pic Marine biology              Rio Isla   -27       \n4 Congo Rapids   Ltd. Corporation               <NA>       Azurionix \n5 Brisa Marina Surfboard AB Marine conservation -27        <NA>      \n6 Mar de la Felicidad Inc Motorboat             <NA>       -27       \n# ℹ 23 more rows\n#\n# A tibble: 28 × 4\n   from    to monthyear      Weight\n  <int> <int> <chr>           <int>\n1     1     2 August 2034        58\n2     1     2 October 2034       10\n3     1     2 September 2034     36\n# ℹ 25 more rows\n\n\nThe greatest edge weight is from the company “Andhra Pradesh Sp Worldwide” to “Jharkhand Sea S.p.A. United” with weight of 108, which is higher than the next highest edge weight of 20."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-ggraph-network-graph-with-facet_edges-as-monthyear.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-ggraph-network-graph-with-facet_edges-as-monthyear.",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.1.2 Plotting a ggraph network graph with facet_edges as (~monthyear).",
    "text": "3.1.2 Plotting a ggraph network graph with facet_edges as (~monthyear).\n\n\nShow the code\n# Plotting of Tuna Graph with Monthyear facet\nset_graph_style()\n\ni <- ggraph(tuna_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.4) +\n  scale_edge_width(range = c(0.1, 8)) +\n  geom_node_point(aes(colour = id), \n                  size = 3)\n\ni + facet_edges(~monthyear, nrow = 3) + th_foreground(foreground = \"grey80\",  \n                border = TRUE) +   \n  theme(strip.text.x = element_text(size = 16),\n        legend.key.size = unit(0.7, 'cm'), #change legend key size\n        legend.key.height = unit(0.7, 'cm'), #change legend key height\n        legend.key.width = unit(0.7, 'cm'), #change legend key width\n        legend.title = element_text(size=14), #change legend title font size\n        legend.text = element_text(size=12),\n        legend.position = \"bottom\",legend.direction = \"vertical\") +\n  labs(\n    title = \"Tuna shipments across the months in year 2034\",\n    subtitle = \"Displays the relationship between tuna trading companies, and the months in which they are more active\")\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nThe monthyear facet shows that the majority of the 108 weight (representing shipments) are formed largely in the two months Aug 2034 (weight=58) and Sep 2034 (weight=36).\nIt is indeed suspicious that such high amounts of shipments appear for 2 months in a year and thereafter goes to zero, especially since there are no seasons in Tuna fishing. It could be an example of a company that is involved in IUU fishing - overfishing in that two months then closing down to open as another company.\nThis could definitely be explored in greater detail"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#diving-into-the-main-mc2-dataset",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#diving-into-the-main-mc2-dataset",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.2 Diving into the main MC2 Dataset",
    "text": "3.2 Diving into the main MC2 Dataset"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#using-tbl_graphs",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#using-tbl_graphs",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.2.1 Using tbl_graphs:",
    "text": "3.2.1 Using tbl_graphs:\n\n\nShow the code\n# Preparing of MC2 Graphs\nMC2_graph <- tbl_graph(nodes = MC2_nodes_extracted,\n                       edges = MC2_edges_aggregated,\n                       directed = TRUE)\n\nMC2_graph %>%\n  activate(edges) %>%\n  arrange(desc(Weight))\n\n\n# A tbl_graph: 58 nodes and 118 edges\n#\n# A directed acyclic multigraph with 13 components\n#\n# A tibble: 118 × 5\n   from    to hscode  year Weight\n  <int> <int> <chr>  <dbl>  <int>\n1     7    40 841810  2034   6844\n2     7    40 841810  2033   6185\n3    30    40 950300  2030   6114\n4     9    44 870324  2028   3547\n5    31    56 304620  2031   3471\n6     9    43 870323  2028   3237\n# ℹ 112 more rows\n#\n# A tibble: 58 × 1\n  id                             \n  <chr>                          \n1 Aqua Mermaid Corporation Export\n2 Bahía del Este Oyj Transit     \n3 Beachcombers NV and Son's      \n# ℹ 55 more rows\n\n\nShow the code\nMC2_graph\n\n\n# A tbl_graph: 58 nodes and 118 edges\n#\n# A directed acyclic multigraph with 13 components\n#\n# A tibble: 58 × 1\n  id                                   \n  <chr>                                \n1 Aqua Mermaid Corporation Export      \n2 Bahía del Este Oyj Transit           \n3 Beachcombers NV and Son's            \n4 Blue Nile  N.V. Marine               \n5 Caracola del Este Corporation Express\n6 Coastal Cruisers Pic Shipping        \n# ℹ 52 more rows\n#\n# A tibble: 118 × 5\n   from    to hscode  year Weight\n  <int> <int> <chr>  <dbl>  <int>\n1     1    33 761010  2031   1294\n2     2    34 611595  2029   1123\n3     3    35 381600  2033   1078\n# ℹ 115 more rows"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-basic-ggraph-graph-with-edge-width-representing-the-weight.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-basic-ggraph-graph-with-edge-width-representing-the-weight.",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.2.2 Plotting a basic ggraph graph with edge width representing the weight.",
    "text": "3.2.2 Plotting a basic ggraph graph with edge width representing the weight.\n\n\nShow the code\nggraph(MC2_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.5) +\n  scale_edge_width(range = c(0.1, 10)) +\n  geom_node_point(aes(colour = id), \n                  size = 5, show.legend = FALSE) +\n  geom_node_text(aes(label = id),size = 3, repel = TRUE\n  ) +\n  theme(legend.key.size = unit(0.7, 'cm'), #change legend key size\n        legend.key.height = unit(0.7, 'cm'), #change legend key height\n        legend.key.width = unit(0.7, 'cm'), #change legend key width\n        legend.title = element_text(size=14), #change legend title font size\n        legend.text = element_text(size=12),\n        legend.position = \"right\",legend.direction = \"vertical\") +\n  labs(title = \"Network Graph of total aggregated shipment\",\n    subtitle = \"Edge weights depict the frequency of shipments in the time period - active shipment routes and active trading partners\")\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFrom the above static graph, we can examine the connectedness of the nodes, with the additional fidelity of shipment frequencies. Intuitively, we can tell which companies are active, heavy trading partners, and which companies are more transient or light trading partners.\n\nSaltwater Supreme OAO Forwarding is a company that has extensive high frequency shipment across all time. In particular, its trading partners French Crab S.p.A Worldwide and bi mu yu Sagi Distribution are higher than the rest of the companies. As a result, we can conclude that they have a strong partnership, with Saltwater Supreme OAO Forwarding as their sole proprietorship - their main partner or hub to forward their catch shipments.\nAnother interesting relationship is that of nian yu Ltd Coporation, which has the next significantly highest edge weights. From the names of the companies that form that cluster of networks, a hypothesis can be made that they do not dabble in fish shipments, but rather marine biology related. Or it may be a cover for their IUU fishing activities given the high frequency of shipments, something quite uncharacteristic of marine biology companies. Either way, this is deserving of greater scrutiny.\n\nAs this only depicts the aggregated frequency of shipments across all time, we are unable to determine any changes in the relationship over time. This will be addressed in the following chart."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-graph-with-the-facet_edges-as-year-to-detect-trends-in-the-shipment-frequency-weight-of-edges-over-time.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-graph-with-the-facet_edges-as-year-to-detect-trends-in-the-shipment-frequency-weight-of-edges-over-time.",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.2.3 Plotting a graph with the facet_edges as (~year) to detect trends in the shipment frequency (weight of edges) over time.",
    "text": "3.2.3 Plotting a graph with the facet_edges as (~year) to detect trends in the shipment frequency (weight of edges) over time.\n\n\nShow the code\ng <- ggraph(MC2_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = id), \n                  size = 2, show.legend = FALSE)\n\ng + facet_edges(~year)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-an-interactive-network-graph-using-visnetwork",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-an-interactive-network-graph-using-visnetwork",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.2.4 Plotting an interactive network graph using visNetwork",
    "text": "3.2.4 Plotting an interactive network graph using visNetwork\n\n3.4.1 Preparing the Data\nData is first prepared with the following code. Similarly, as we only want to investigate the top few companies in the network (as it intuitively likely would be the more global companies with more connections), the weight of the edges are filtered >1000, leaving the top 100+ companies.\n\n\nShow the code\n# Data preparation for plotting an interactive network graph\nMC2_edges_aggregated2 <- MC2_edges %>%\n  left_join(MC2_nodes, by = c(\"source\" = \"id\")) %>%\n  rename(from = source) %>%\n  left_join(MC2_nodes, by = c(\"target\" = \"id\")) %>%\n  rename(to = target) %>%\n  group_by(from, to) %>%\n    summarise(weight = n()) %>%\n  filter(from!=to) %>%\n  filter(weight > 1000) %>%\n  ungroup()\n\n\n\n\n3.4.2 Interactive Network Graph using visNetwork\n\n\nShow the code\n# Plotting an interactive network graph\nvisNetwork(MC2_nodes_extracted,\n           MC2_edges_aggregated2) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visOptions(highlightNearest = TRUE,\n             nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\nFrom the above network graph, we can examine the more active companies, which are plotted around the centre of the network graph. Clicking the various nodes show the connections between that particular company and the other companies it is linked to. Immediately, 3 companies pop up as being the most widely connected:\n\n\nhǎi dǎn Corporation Wharf\nPanope Limited Liability Company\nCaracola del Sol Services\n\nThese could be representative of companies which function as the middle men or hub, through which shipments get routed through.\nDo note that this chart does not reveal the companies which have the greatest frequency of shipments.\n\n\n\n\n3.4.3 Interactive Network Graph using visNetwork with direction of trade flows\n\n\nShow the code\nedges_df <- MC2_graph %>%\n  activate(edges) %>%\n  as.tibble()\n\n\n\n\nShow the code\nnodes_df <- MC2_graph %>%\n  activate(nodes) %>%\n  as.tibble() %>%\n  rename(label = id) %>%\n  mutate(id=row_number()) %>%\n  select(id, label)\n\n\n\n\nShow the code\nvisNetwork(nodes_df,\n           edges_df) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visEdges(arrows = \"to\", \n           smooth = list(enabled = TRUE, \n                         type = \"curvedCW\"))\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nBuilding upon the visNetwork chart in 3.4.2, we further refine the data and chart to further depict and visually accentuate the flows of trades between the nodes. From this chart, we will be able to better form an understanding of the relationships between the companies.\n\nThe chart confirms the relationship of two of the companies that were previously highlighted: 1. hǎi dǎn Corporation Wharf and 2.Caracola del Sol Services. Both of which are clearly in the centre of a concentric circle of nodes, with clear trade links pointing from other companies to them.\nAnother benefit of this chart is the ability to separate groups of nodes into clear trading groups, showing the relationship between the companies that supplies to these hubs, as well as the network or supply chain of the larger trading groups. For example, the large network in which Caracola del Sol Services is one of the central nodes has a wider array of companies contributing to the flow of trade as compared to the smaller but more concentrated network that hǎi dǎn Corporation Wharf is part of."
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html",
    "href": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html",
    "title": "Hands-on Exercise 6",
    "section": "",
    "text": "pacman::p_load(plotly, tidyverse, corrplot, ggstatsplot, tidyverse, ggcorrplot)\nrequire(devtools) install_version(“ggtern”, version = “3.4.1”, repos = “http://cran.us.r-project.org”)\nlibrary(ggtern)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#importing-the-data",
    "href": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#importing-the-data",
    "title": "Hands-on Exercise 6",
    "section": "2.1 Importing the Data",
    "text": "2.1 Importing the Data\n#Reading the data into R environment pop_data <- read_csv(“data/respopagsex2000to2018_tidy.csv”)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#preparing-the-data",
    "href": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#preparing-the-data",
    "title": "Hands-on Exercise 6",
    "section": "2.2 Preparing the Data",
    "text": "2.2 Preparing the Data\n#Deriving the young, economy active and old measures agpop_mutated <- pop_data %>% mutate(Year = as.character(Year))%>% spread(AG, Population) %>% mutate(YOUNG = rowSums(.[4:8]))%>% mutate(ACTIVE = rowSums(.[9:16])) %>% mutate(OLD = rowSums(.[17:21])) %>% mutate(TOTAL = rowSums(.[22:24])) %>% filter(Year == 2018)%>% filter(TOTAL > 0)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#plotting-basic-ternary-diagrams",
    "href": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#plotting-basic-ternary-diagrams",
    "title": "Hands-on Exercise 6",
    "section": "3.1.2 Plotting Basic Ternary Diagrams",
    "text": "3.1.2 Plotting Basic Ternary Diagrams\n#Building the static ternary plot ggtern(data=agpop_mutated,aes(x=YOUNG,y=ACTIVE, z=OLD)) + geom_point()"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#adding-colors-and-aes-to-the-basic-ternary-diagram",
    "href": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#adding-colors-and-aes-to-the-basic-ternary-diagram",
    "title": "Hands-on Exercise 6",
    "section": "3.1.2 Adding Colors and Aes to the Basic Ternary Diagram",
    "text": "3.1.2 Adding Colors and Aes to the Basic Ternary Diagram\n#Building the static ternary plot ggtern(data=agpop_mutated, aes(x=YOUNG,y=ACTIVE, z=OLD)) + geom_point() + labs(title=“Population structure, 2015”) + theme_rgbw()"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#building-an-interative-ternary-diagram-using-plotly",
    "href": "Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html#building-an-interative-ternary-diagram-using-plotly",
    "title": "Hands-on Exercise 6",
    "section": "3.1.3 Building an interative Ternary Diagram using plotly()",
    "text": "3.1.3 Building an interative Ternary Diagram using plotly()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#importing-the-requisite-json-files.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#importing-the-requisite-json-files.",
    "title": "Take-home Exercise 2 - MC2",
    "section": "2.2 Importing the requisite JSON files.",
    "text": "2.2 Importing the requisite JSON files.\nFor minicase 2, there is the large dataset “MC2”, and the 12 individual datasets from the bundle date of the different individual fish species.\n\n\nShow the code\nMC2 <- jsonlite::fromJSON(\"data/mc2_challenge_graph.json\")\n\n\n\n\nShow the code\ntuna <- jsonlite::fromJSON(\"data/bundles/tuna.json\")\nshark <- jsonlite::fromJSON(\"data/bundles/shark.json\")\nsalmon <- jsonlite::fromJSON(\"data/bundles/salmon.json\")\nsalmon_wgl <- jsonlite::fromJSON(\"data/bundles/salmon_wgl.json\")\npollock <- jsonlite::fromJSON(\"data/bundles/pollock.json\")\nmackerel <- jsonlite::fromJSON(\"data/bundles/mackerel.json\")\nlichen <- jsonlite::fromJSON(\"data/bundles/lichen.json\")\nherring <- jsonlite::fromJSON(\"data/bundles/herring.json\")\ncod2 <- jsonlite::fromJSON(\"data/bundles/cod2.json\")\nchub_mackerel <- jsonlite::fromJSON(\"data/bundles/chub_mackerel.json\")\ncatfish <- jsonlite::fromJSON(\"data/bundles/catfish.json\")\ncarp <- jsonlite::fromJSON(\"data/bundles/carp.json\")\n\n\nTaking a look at the MC2 dataset:\n\n\nShow the code\nglimpse(MC2)\n\n\nList of 5\n $ directed  : logi TRUE\n $ multigraph: logi TRUE\n $ graph     : Named list()\n $ nodes     :'data.frame': 34576 obs. of  4 variables:\n  ..$ shpcountry: chr [1:34576] \"Polarinda\" NA \"Oceanus\" NA ...\n  ..$ rcvcountry: chr [1:34576] \"Oceanus\" NA \"Oceanus\" NA ...\n  ..$ dataset   : chr [1:34576] \"MC2\" \"MC2\" \"MC2\" \"MC2\" ...\n  ..$ id        : chr [1:34576] \"AquaDelight Inc and Son's\" \"BaringoAmerica Marine Ges.m.b.H.\" \"Yu gan  Sea spray GmbH Industrial\" \"FlounderLeska Marine BV\" ...\n $ links     :'data.frame': 5464378 obs. of  9 variables:\n  ..$ arrivaldate     : chr [1:5464378] \"2034-02-12\" \"2034-03-13\" \"2028-02-07\" \"2028-02-23\" ...\n  ..$ hscode          : chr [1:5464378] \"630630\" \"630630\" \"470710\" \"470710\" ...\n  ..$ valueofgoods_omu: num [1:5464378] 141015 141015 NA NA NA ...\n  ..$ volumeteu       : num [1:5464378] 0 0 0 0 0 0 0 0 0 0 ...\n  ..$ weightkg        : int [1:5464378] 4780 6125 10855 11250 11165 11290 9000 19490 6865 19065 ...\n  ..$ dataset         : chr [1:5464378] \"MC2\" \"MC2\" \"MC2\" \"MC2\" ...\n  ..$ source          : chr [1:5464378] \"AquaDelight Inc and Son's\" \"AquaDelight Inc and Son's\" \"AquaDelight Inc and Son's\" \"AquaDelight Inc and Son's\" ...\n  ..$ target          : chr [1:5464378] \"BaringoAmerica Marine Ges.m.b.H.\" \"BaringoAmerica Marine Ges.m.b.H.\" \"-15045\" \"-15045\" ...\n  ..$ valueofgoodsusd : num [1:5464378] NA NA NA NA NA ...\n\n\n\n\n\n\n\n\nNote\n\n\n\nA quick glimpse of the data reveals that the bundles data is breakdown of the shipments of the different species of fishes, for the year 2034 only, while MC2 data is the aggregated shipment of fish for the years 2028 - 2034.\nAs such, the approach in tackling the task would be to investigate the smaller bundles data first for clues, which would narrow down and scope the subsequent analysis when tackling the much larger MC2 data set."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-graph-with-the-facet_edges-as-year",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#plotting-a-graph-with-the-facet_edges-as-year",
    "title": "Take-home Exercise 2 - MC2",
    "section": "3.2.3 Plotting a graph with the facet_edges as (~year)",
    "text": "3.2.3 Plotting a graph with the facet_edges as (~year)\nThis is done to detect trends in the shipment frequency (weight of edges) over time.\n\n\nShow the code\ng <- ggraph(MC2_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.4, show.legend = \"top\") +\n  scale_edge_width(range = c(0.1, 8)) +\n  geom_node_point(aes(colour = id), \n                  size = 3) + \n  geom_node_text(aes(label = id),size = 2, repel = TRUE\n  )\n\ng + facet_edges(~year)+\n  th_foreground(foreground = \"grey80\",  \n                border = TRUE) +\n  theme(\n        strip.text.x = element_text(size = 16),\n        legend.key.size = unit(0.6, 'cm'), #change legend key size\n        legend.key.height = unit(0.6, 'cm'), #change legend key height\n        legend.key.width = unit(0.6, 'cm'), #change legend key width\n        legend.title = element_text(size=12), #change legend title font size\n        legend.text = element_text(size=10),\n        legend.position = \"bottom\",legend.direction = \"vertical\") +\n  labs(\n    title = \"Top aggregated shipments across the years\",\n    subtitle = \"Companies with more pronounced widths depicts established partnerships between companies with business links\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFrom the above graph, which further spilts the previous chart into the various years using the facet feature of ggraph, we can delve into the changes in relationship patterns between the companies over the years. With that, we may be able to determine suspicious activities or behaviours over time. In looking for patterns to scrutinise, i first identify edges which have bigger widths, which are present for a short period of time, and as quickly are not present in the next year. This may be characteristic of companies which engage in IUU activities, which capitalise of on the fact that it is a new company, try to make as much illegal money as it possibly can as it flies under the radar, and then when it rouses the suspicion of the authorities, are forced to shut down and reappear as another company.\n\nThe relationship between Ola Azul Ges m.B.H Services and Saltwater Supreme OAO Forwarding has a very thick edge with depicting many shipments in 2030. However, this relationship had totally gone cold in 2031. This could be an example of the above-mentioned phenomenon.\nAnother possibly suspicious group of companies would be Saltwater Sisters Inc Seafaring and Togo S.A de C.V in the year 2033. Again, similar to the above observation, there is a huge edge width for the year 2033 only, with nothing the year prior and relatively negligible activity the year after. This could be a sign of the suspicious activities.\n\nFor contrast, an example of more normal business activity would be the relationship between Ianira Starfish Import and Haryana s Sagl Transport over the years 2028 to 2030. There is a more gradual decline of activity over time, as oppose to a sudden stop as observed in the 2 examples given above."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html",
    "title": "Take-home Exercise 3 - MC3",
    "section": "",
    "text": "The country of Oceanus has sought FishEye International’s help in identifying companies possibly engaged in illegal, unreported, and unregulated (IUU) fishing. As part of the collaboration, FishEye’s analysts received import/export data for Oceanus’ marine and fishing industries. However, Oceanus has informed FishEye that the data is incomplete. To facilitate their analysis, FishEye transformed the trade data into a knowledge graph. Using this knowledge graph, they hope to understand business relationships, including finding links that will help them stop IUU fishing and protect marine species that are affected by it. FishEye analysts found that node-link diagrams gave them a good high-level overview of the knowledge graph. However, they are now looking for visualizations that provide more detail about patterns for entities in the knowledge graph\n\n\n\nUse visual analytics to identify anomalies in the business groups present in the knowledge graph. Limit your response to 400 words and 5 images."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#importing-json-file-by-using-jsonlite-package",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#importing-json-file-by-using-jsonlite-package",
    "title": "Take-home Exercise 3 - MC3",
    "section": "Importing json file by using jsonlite package",
    "text": "Importing json file by using jsonlite package\n\n\nShow the code\nmc3_data <-\n  jsonlite::fromJSON(\"data/MC3.json\")\n\n\n\n\nShow the code\nmc3_edges <- as_tibble(mc3_data$links)\n\n\n\n\nShow the code\nmc3_edges <-\n  as_tibble(mc3_data$links) %>%\n    distinct() %>%\n  mutate(source = as.character(source),\n         target = as.character(target),\n         type = as.character(type)) %>%\n  group_by(source, target, type) %>%\n  summarise(weights = n()) %>%\n  filter(source!=target) %>%\n  ungroup()\n\n\n\n\nShow the code\nmc3_nodes <- as_tibble(mc3_data$nodes)\n\n\n\n\nShow the code\nmc3_nodes <- as_tibble(mc3_data$nodes) %>%\n# distinct() %>%\n  mutate(country = as.character(country),\n         id = as.character(id),\n         product_services = as.character(product_services),\n         revenue_omu = as.numeric(as.character(revenue_omu)),\n         type = as.character(type)) %>%\n  select(id, country, type, revenue_omu, product_services)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#initial",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#initial",
    "title": "Take-home Exercise 3 - MC3",
    "section": "Initial",
    "text": "Initial\nneed to recode the character(0) into NA to ensure future text sensing will be coherent\nbusiness group can be found by type (ie. company, beneficial owner, company contacts). beneficial owner will be connected to comapny. Company contacts will be connect to company. company connected to company\nlook also at the description part. Some can be straightforward: automobile. Other can be computer product notebooks etc,\nif you dont do text analytics, can just type in the filter and explore key words like “fish”\nQuestion 2: Develop a visual analytics process to find similar businesses and group them. This analysis should focus on a business most important features and present those features clearly to the user\n\nUsing key word searches of the description of product_services and grouping companies which are in similar areas.\nLinks between company contact and companies. Typically companies in the same line of business will have overlapping company contacts.\n\n\nwe can explore filtering by countries/geographical location as it would be more likely that companies in the same countries will have the same company contacts.\nwe can explore further ranking by revenue_omu, or comparing companies similar revenue_omu as competitors (less likely)\n\n(the challenge would be identifying if the individual in question is the source or the target. Intend to overcome this by first removing the names of the beneficial owners, then mapping the company contacts)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#loading-the-requisite-r-libraries",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#loading-the-requisite-r-libraries",
    "title": "Take-home Exercise 3 - MC3",
    "section": "2.1 Loading the requisite R libraries:",
    "text": "2.1 Loading the requisite R libraries:\n\n\nShow the code\npacman::p_load(jsonlite, tidygraph, ggraph, visNetwork, gralayouts, ggforce, tidytext, tidyverse, skimr, patchwork, ggdist, ggridges, ggthemes, scales)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#importing-the-requisite-json-files",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#importing-the-requisite-json-files",
    "title": "Take-home Exercise 3 - MC3",
    "section": "2.2 Importing the requisite JSON files",
    "text": "2.2 Importing the requisite JSON files\n\n\nShow the code\nmc3_data <-\n  jsonlite::fromJSON(\"data/MC3.json\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#extracting-edges",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#extracting-edges",
    "title": "Take-home Exercise 3 - MC3",
    "section": "2.2 Extracting Edges",
    "text": "2.2 Extracting Edges\n\n\nShow the code\nmc3_edges <-\n  as_tibble(mc3_data$links) %>%\n    distinct() %>%\n  mutate(source = as.character(source),\n         target = as.character(target),\n         type = as.character(type)) %>%\n  group_by(source, target, type) %>%\n  summarise(weights = n()) %>%\n  filter(source!=target) %>%\n  ungroup()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#extracting-nodes",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#extracting-nodes",
    "title": "Take-home Exercise 3 - MC3",
    "section": "2.3 Extracting Nodes",
    "text": "2.3 Extracting Nodes\n\n\nShow the code\nmc3_nodes <- as_tibble(mc3_data$nodes) %>%\n# distinct() %>%\n  mutate(country = as.character(country),\n         id = as.character(id),\n         product_services = as.character(product_services),\n         revenue_omu = as.numeric(as.character(revenue_omu)),\n         type = as.character(type)) %>%\n  select(id, country, type, revenue_omu, product_services)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#exploring-edges",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#exploring-edges",
    "title": "Take-home Exercise 3 - MC3",
    "section": "3.1 Exploring Edges",
    "text": "3.1 Exploring Edges\n\n3.1.1 Edges from the mc3_edges dataframe are explored using the skim and datatable functions.\n\n\nShow the code\nskim(mc3_edges)\n\n\n\nData summary\n\n\nName\nmc3_edges\n\n\nNumber of rows\n24036\n\n\nNumber of columns\n4\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n3\n\n\nnumeric\n1\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nsource\n0\n1\n6\n700\n0\n12856\n0\n\n\ntarget\n0\n1\n6\n28\n0\n21265\n0\n\n\ntype\n0\n1\n16\n16\n0\n2\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nweights\n0\n1\n1\n0\n1\n1\n1\n1\n1\n▁▁▇▁▁\n\n\n\n\n\nThe are no missing variables in the mc3_edges dataframe.\nWe next take a glimpse of the first few lines of the dataframe using the following datatable.\n\n\nShow the code\nDT::datatable(mc3_edges)\n\n\n\n\n\n\n\nThis dataframe depicts the connections between companies and company contacts/beneficial owners.\n\n\n3.1.2 Bar Chart of Type of Edges\nTo further explore the count of each type of contact, we plot a bar chart of the type of edges in the mc3_edges dataframe.\n\n\nShow the code\nggplot(data = mc3_edges,\n       aes(x = type)) +\n  geom_bar() +\n  geom_text(\n    aes(label = after_stat(count)),\n    stat = \"count\",\n    vjust = -2\n  ) + \n  ylim (0,18000) + \n  labs(title = \"Count of type of edges in mc3_edges dataframe\", y= \"Count\", x = \"Type of Edges\" )\n\n\n\n\n\nThere are significantly more beneficial owners (16792) vs company contacts (7244)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#exploring-the-nodes-data-frame",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#exploring-the-nodes-data-frame",
    "title": "Take-home Exercise 3 - MC3",
    "section": "3.2 Exploring the nodes data frame",
    "text": "3.2 Exploring the nodes data frame\n\n3.2.1 Nodes from the mc3_nodes dataframe are explored using the skim and datatable functions.\n\n\nShow the code\nskim(mc3_nodes)\n\n\n\nData summary\n\n\nName\nmc3_nodes\n\n\nNumber of rows\n27622\n\n\nNumber of columns\n5\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n4\n\n\nnumeric\n1\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nid\n0\n1\n6\n64\n0\n22929\n0\n\n\ncountry\n0\n1\n2\n15\n0\n100\n0\n\n\ntype\n0\n1\n7\n16\n0\n3\n0\n\n\nproduct_services\n0\n1\n4\n1737\n0\n3244\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nrevenue_omu\n21515\n0.22\n1822155\n18184433\n3652.23\n7676.36\n16210.68\n48327.66\n310612303\n▇▁▁▁▁\n\n\n\n\n\nThere are 21515 missing values in the revenue_omu column. Given the importance of this data, and the huge number of missing values, it rouses suspicion and will be explored in greater detail subsequently.\n\n\nShow the code\nDT::datatable(mc3_nodes)\n\n\n\n\n\n\n\n\n\n3.2.2 Bar Chart of Type of Nodes\nNext, a bar chart of the type of nodes is plotted.\n\n\nShow the code\nggplot(data = mc3_nodes,\n       aes(x = type)) +\n  geom_bar() +\n  geom_text(\n    aes(label = after_stat(count)),\n    stat = \"count\",\n    vjust = -2\n  ) + ylim (0,13000) + labs(\n    title = \"Count of type of nodes in mc3_nodes dataframe\", y= \"Count\", x = \"Type\" )\n\n\n\n\n\n\n\n3.2.3 Bar chart of Country of Origin\nNext, we explore explore Country of Origin of the nodes for interesting relationships, comparing between Companies vs. Company contacts vs. Beneficial owners.\n\n\nShow the code\nnodes_country <- mc3_nodes %>%\n  group_by(country, type) %>%\n  summarise(count = n()) %>%\n  ungroup()\n\n\n\n\nShow the code\nplot_company <- nodes_country %>%\n  filter(type == \"Company\" &\n           count > 150) %>%\n  ggplot(aes(x = reorder(country, -count), y = count)) +\n  geom_col() +\n  ylim(0,4000) +\n  geom_text(\n    aes(label = count),\n    vjust = -2\n  ) +  \n  labs(\n    title = \"Count of Company's Country of Origin\", y= \"Count\", x = \"Country\", subtitle = \"Companies predominantly from ZH, Oceanus, and Marebak\"\n  )\n\nplot_owner <- nodes_country %>%\n  filter(type == \"Beneficial Owner\") %>%\n  ggplot(aes(x = reorder(country, -count), y = count)) +\n  geom_col() +\n  ylim(0,14000) +\n  geom_text(\n    aes(label = count),\n    vjust = -2\n  ) +  \n  labs(\n    title = \"Count of Beneficial Owner's Country of Origin\", y= \"Count\", x = \"Country\", subtitle = \"Beneficial Ownders predominantly from ZH\"\n  )\n\nplot_contacts <- nodes_country %>%\n  filter(type == \"Company Contacts\") %>%\n  ggplot(aes(x = reorder(country, -count), y = count)) +\n  geom_col() +\n  ylim(0,8000) +\n  geom_text(\n    aes(label = count),\n    vjust = -2\n  ) +  \n  labs(\n    title = \"Count of Company Contacts' Country of Origin\", y= \"Count\", x = \"Country\", subtitle = \"Company Contact predominantly from ZH\"\n  ) \n\nplot_company / plot_owner / plot_contacts\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nDespite most of the owners and and company contacts orginating from ZH, there count of country of origin of the company is more diverse, with ZH, Oceanus, and Marebak taking the top 3 spots. It is indicative of owners venturing out of their own countries to set up companies in other countries.\n\n\n\n\n3.2.4 Distribution of Revenue of Companies\nRevenue is postulated to provide substantial information on the company, and would be instrumental in providing clues to any anomalous behaviours. A boxplot with frequency dot plot overlaid is plotted to visualise the distribution.\n\n\nShow the code\ncompany_revenue <- mc3_nodes %>% \n  filter(type == \"Company\")\n\nggplot(company_revenue, \n       aes(y = revenue_omu)) +\n scale_y_continuous(\n    limits = c(0, 200000),\n    breaks = pretty_breaks(n = 5),\n    labels = dollar_format())+\n  geom_boxplot(width = 0.5,\n               outlier.shape = NA, color = 'darkred') +\n  stat_dots(color = 'blue') +\n  coord_flip() + \n  labs(\n    title = \"Distribution of Revenue of Companies\", y= \"Revenue\", x = \"Count\", subtitle = \"Highly right skewed distribution of companies' revenue\"\n  )\n\n\n\n\n\nThe chart above shows that a majority of the companies make less than $25,000 in revenue and the distribution of the revenue of companies os right skewed.\n\n\n3.2.5 Relationship between Companies and Number of Owners\nGetting the number of owners each company has:\n\n\nShow the code\nedges_by_target <- mc3_edges %>%\n  filter(type == 'Beneficial Owner') %>%\n  group_by(source, type) %>%\n  summarise(owner_count = n())%>%\n  arrange(desc(owner_count))%>%\n  ungroup()\n\n\nExploring the datatable of edges by companies:\n\n\nShow the code\nDT::datatable(edges_by_target)\n\n\n\n\n\n\n\nThe table above displays the number of owner each company has. It is postulated that companies with multiple beneficial owners has the oversight of many people, it is unlikely to be engaged in dubious activities, whereas companies which are sole proprietorships are at the bidding of that single beneficial owner.\n\n\nShow the code\nowner_count_df <- edges_by_target %>%\n  group_by(owner_count) %>%\n  summarize(count = n()) %>%\n  arrange(desc(count)) %>%\n  ungroup()\n\n\n\n\nShow the code\nfiltered_data <- owner_count_df %>%\n  filter(owner_count <= quantile(owner_count, 0.2))\n\nggplot(filtered_data, aes(x = factor(owner_count), y = count)) +\n  geom_col() +\n  ylim(0,7000) +\n  geom_text(\n    aes(label = count),\n    vjust = -1,\n    size = 3\n  ) +  \n  labs(\n    title = \"Count of Companies by number of owners\", y= \"Count of Companies\", x = \"Number of Owners\", subtitle = \"Majority of companies have only one owner\"\n  )\n\n\n\n\n\nThe above graph shows that 6415 companies are sole proprietorships and form the majority of the companies.\n\n\n3.2.6 Conclusion of EDA\n\n\n\n\n\n\nNote\n\n\n\nInitial Sensing:\n\nBeneficial owners who are sole owners of multiple companies wield disproportionate influence with having more autonomy without the scrutiny of other beneficial owners.\nCompanies with unreported revenue yet with many company contacts - shows that the company is extensive, and could be reporting high revenue, yet the revenue is unaccounted for.\nGiven that the dataset contains companies engaged in many other types of products/services besides fish-related services, we should narrow down the search to just fish related companies to further explore anomalous behaviours."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/data/geospatial/MPSZ-2019.html",
    "href": "In-class_Ex/In-class_Ex08/data/geospatial/MPSZ-2019.html",
    "title": "ISSS608-VAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html",
    "title": "In-class Exercise 8",
    "section": "",
    "text": "pacman::p_load(sf, tmap, tidyverse)\n\n\nmpsz <- st_read(dsn = \"data/geospatial\", \n                layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `C:\\Users\\Shaun\\Desktop\\Shauntanyr\\ISSS608-VAA\\In-class_Ex\\In-class_Ex08\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\nmpsz\n\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\nFirst 10 features:\n   OBJECTID SUBZONE_NO       SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1         1          1    MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2         2          1    PEARL'S HILL    OTSZ01      Y          OUTRAM\n3         3          3       BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4         4          8  HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5         5          3         REDHILL    BMSZ03      N     BUKIT MERAH\n6         6          7  ALEXANDRA HILL    BMSZ07      N     BUKIT MERAH\n7         7          9   BUKIT HO SWEE    BMSZ09      N     BUKIT MERAH\n8         8          2     CLARKE QUAY    SRSZ02      Y SINGAPORE RIVER\n9         9         13 PASIR PANJANG 1    QTSZ13      N      QUEENSTOWN\n10       10          7       QUEENSWAY    QTSZ07      N      QUEENSTOWN\n   PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1          MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2          OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3          SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4          BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5          BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n6          BM CENTRAL REGION       CR 9D286521EF5E3B59 2014-12-05 25358.82\n7          BM CENTRAL REGION       CR 7839A8577144EFE2 2014-12-05 27680.06\n8          SR CENTRAL REGION       CR 48661DC0FBA09F7A 2014-12-05 29253.21\n9          QT CENTRAL REGION       CR 1F721290C421BFAB 2014-12-05 22077.34\n10         QT CENTRAL REGION       CR 3580D2AFFBEE914C 2014-12-05 24168.31\n     Y_ADDR SHAPE_Leng SHAPE_Area                       geometry\n1  29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2  29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n3  29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...\n4  29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...\n5  30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30...\n6  29991.38   4428.913  1030378.8 MULTIPOLYGON (((25899.7 297...\n7  30230.86   3275.312   551732.0 MULTIPOLYGON (((27746.95 30...\n8  30222.86   2208.619   290184.7 MULTIPOLYGON (((29351.26 29...\n9  29893.78   6571.323  1084792.3 MULTIPOLYGON (((20996.49 30...\n10 30104.18   3454.239   631644.3 MULTIPOLYGON (((24472.11 29...\n\n\n\npopdata <- read_csv(\"data/aspatial/respopagesextod2011to2020.csv\")\n\nRows: 984656 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): PA, SZ, AG, Sex, TOD\ndbl (2): Pop, Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\npopdata2020 <- popdata %>%\n  filter(Time == 2020) %>%\n  group_by(PA, SZ, AG) %>%\n  summarise(`POP` = sum(`Pop`)) %>%\n  ungroup()%>%\n  pivot_wider(names_from=AG, \n              values_from=POP) %>%\n  mutate(YOUNG = rowSums(.[3:6])\n         +rowSums(.[12])) %>%\nmutate(`ECONOMY ACTIVE` = rowSums(.[7:11])+\nrowSums(.[13:15]))%>%\nmutate(`AGED`=rowSums(.[16:21])) %>%\nmutate(`TOTAL`=rowSums(.[3:21])) %>%  \nmutate(`DEPENDENCY` = (`YOUNG` + `AGED`)\n/`ECONOMY ACTIVE`) %>%\n  select(`PA`, `SZ`, `YOUNG`, \n       `ECONOMY ACTIVE`, `AGED`, \n       `TOTAL`, `DEPENDENCY`)\n\n`summarise()` has grouped output by 'PA', 'SZ'. You can override using the\n`.groups` argument."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#point-of-interest-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#point-of-interest-1",
    "title": "Take-home Exercise 3 - MC3",
    "section": "3.1 Point of Interest 1:",
    "text": "3.1 Point of Interest 1:\nThe first anomalous behaviour that will be investigated would be sole beneficial owners of multiple companies, with companies having higher revenue being more suspicious. The reason being, there is no need for transparency and being accountable to shareholders for these companies. As such, they are less deterred from pursuing illegal activities given the lesser oversight.\nWrangling the edges and nodes dataframe to enable the creation of a network graph.\n\n\nShow the code\nsingle_bowners <- mc3_edges %>%\n  filter(type == \"Beneficial Owner\") %>%\n  distinct(source, .keep_all = TRUE) \n\nsingle_bowner_count <- single_bowners %>%\n  group_by(target) %>%\n  mutate(count = n()) %>%\n  filter(count >= 4) %>%\n  ungroup()\n\n\n\n\nShow the code\nsingle_bowner_count_revenue <- left_join(single_bowner_count, mc3_nodes, by = c(\"source\"=\"id\")) %>%\n  select(-type.y) %>%\n  rename(\"type\" = \"type.x\")\n\nsingle_bowner_count_revenue1 <-  single_bowner_count_revenue %>%\n  distinct() %>%\n  rename(\"from\" = \"source\",\n         \"to\" = \"target\")\n\nbowner_source <- single_bowner_count_revenue1 %>%\n  distinct(from) %>%\n  rename(\"id\" = \"from\")\n\nbowner_target <- single_bowner_count_revenue1 %>%\n  distinct(to) %>%\n  rename(\"id\" = \"to\")\n\nbowner_nodes_extracted <- rbind(bowner_source, bowner_target)\n\nbowner_nodes_extracted$group <- ifelse(bowner_nodes_extracted$id %in% single_bowner_count_revenue$source, \"Company\", \"Beneficial Owner\")\n\n\nCreating the visNetwork Graph\n\n\nShow the code\nvisNetwork(\n    bowner_nodes_extracted, \n    single_bowner_count_revenue1\n  ) %>%\n  visIgraphLayout(\n    layout = \"layout_with_fr\"\n  ) %>%\n  visGroups(groupname = \"Company\",\n            color = \"lightblue\") %>%\n  visGroups(groupname = \"Beneficial Owner\",\n            color = \"yellow\") %>%\n  visLegend() %>%\n  visEdges(\n    arrows = \"to\"\n  ) %>%\n  visOptions(\n    highlightNearest = list(enabled = T, degree = 2, hover = T),\n    nodesIdSelection = TRUE,\n    selectedBy = \"group\",\n    collapse = TRUE)\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWith the possibility of lesser oversight, there is the chance that these companies may be participating in suspicious activity. However, it should be noted that the size as well and the fidelity of the nature of business of these companies is not available on the network graph. It should therefore be investigated in greater detail, before a solid conclusion can be formed. However, in the meantime, it is the exception and not the norm and should be monitored."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#point-of-interest-2",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#point-of-interest-2",
    "title": "Take-home Exercise 3 - MC3",
    "section": "3.2 Point of Interest 2",
    "text": "3.2 Point of Interest 2\nThe next suspicious behaviour that deserves investigating would be companies with many company contacts, that have missing revenue reported. There is a chance that these companies are in fact bring in substantial revenue but have undeclared their revenue.\nWrangling the edges and nodes dataframe to enable the creation of a network graph.\n\n\nShow the code\n# Extract nodes that have unreported revenue\nnodes_norev <- mc3_nodes %>%\n  filter(is.na(revenue_omu))\n\nnodes_norev_compcontact <- nodes_norev %>%\n  filter(type == \"Company Contacts\") %>%\n  distinct()\n\n# Extracting edges that are company contacts\nedges_norev <- mc3_edges %>%\n  filter(type == \"Company Contacts\") %>%\n  filter(source %in% nodes_norev_compcontact$id) %>%\n  distinct() %>%\n  rename(\"from\" = \"source\",\n         \"to\" = \"target\")\n\n# Extract edges that have more than or equal to 3 company contacts\nedges_norev_high <- edges_norev %>%\n  group_by(from) %>%\n  mutate(count = n()) %>%\n  filter(count >= 3) %>%\n  ungroup()\n\n\n\n\nShow the code\n# Get distinct Source and Target\nnorev_source <- edges_norev_high %>%\n  distinct(from) %>%\n  rename(\"id\" = \"from\")\n\nnorev_target <- edges_norev_high %>%\n  distinct(to) %>%\n  rename(\"id\" = \"to\")\n\n\n\n\nShow the code\n# Bind into single dataframe\nnodes_norev1 <- bind_rows(norev_source, norev_target)\n\nnodes_norev1$group <- ifelse(nodes_norev1$id %in% nodes_norev_compcontact$id, \"Company Contact\", \"Company\")\n\n\nCreating the visNetwork graph\n\n\nShow the code\nvisNetwork(\n    nodes_norev1, \n    edges_norev_high\n  ) %>%\n  visIgraphLayout(\n    layout = \"layout_with_fr\"\n  ) %>%\n  visGroups(groupname = \"Company\",\n            color = \"lightblue\") %>%\n  visGroups(groupname = \"Company Contact\",\n            color = \"yellow\") %>%\n  visLegend() %>%\n  visEdges(\n    arrows = \"to\"\n  ) %>%\n  visOptions(\n    highlightNearest = list(enabled = T, degree = 2, hover = T),\n    nodesIdSelection = TRUE,\n    selectedBy = \"group\",\n    collapse = TRUE)\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nIt is indeed suspicious that so many large companies have unreported revenue. The potulated size, given the lack of revenue data, can only be extrapolated using the number of contacts, and the number of beneficial owners. It should be noted that the number of contacts of these top few companies are similar to those of the top few companies with reported revenue. This should be investigated in further details with other forms of proxy information obtained and pieced together to determine what they can possibly be hiding."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#point-of-interest-3",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#point-of-interest-3",
    "title": "Take-home Exercise 3 - MC3",
    "section": "3.3 Point of Interest 3",
    "text": "3.3 Point of Interest 3\nThe last visual that i would be using to explore specifically fish-related anomalous behaviour would be the networks of biggest company-beneficial owner relationships of fish-related businesses. The reason that this is done is to compare and understand the typical network size of a fish-related business in terms of number of beneficial owners, and compare it with the industry standard.\nWrangling the edges and nodes dataframe to enable the creation of a network graph.\n\n\nShow the code\n# Extract nodes that are fish-related\nfish_nodes <- mc3_nodes %>%\n  filter(grepl(\"fish\", product_services, ignore.case = TRUE))\n\nfish_nodes_bowners <- fish_nodes %>%\n  filter(type == \"Beneficial Owners\") %>%\n  distinct()\n\nfish_nodes_companies <-fish_nodes %>%\n  filter(type == \"Company\") %>%\n  distinct()\n\n# Extract edges that are fish related\nedges_fish <- mc3_edges %>%\n  filter(type %in% c(\"Company\", \"Beneficial Owner\")) %>%\n  filter(source %in% fish_nodes$id) %>%\n  distinct() %>%\n  rename(\"from\" = \"source\",\n         \"to\" = \"target\")\n\n# Extract edges that have more than or equal to 8 links\nedges_fish_high <- edges_fish %>%\n  group_by(from) %>%\n  mutate(count = n()) %>%\n  filter(count >= 8) %>%\n  ungroup()\n\n\n\n\nShow the code\n# Get distinct Source and Target\nfish_source <- edges_fish_high %>%\n  distinct(from) %>%\n  rename(\"id\" = \"from\")\n\nfish_target <- edges_fish_high %>%\n  distinct(to) %>%\n  rename(\"id\" = \"to\")\n\n\n\n\nShow the code\n# Bind into single dataframe\nnodes_fish1 <- bind_rows(fish_source, fish_target)\n\nnodes_fish1$group <- ifelse(nodes_fish1$id %in% fish_nodes_companies$id, \"Company\", \"Beneficial Owner\")\n\n\nCreating the visNetwork Graph\n\n\nShow the code\nvisNetwork(\n    nodes_fish1, \n    edges_fish\n  ) %>%\n  visPhysics(solver = \"forceAtlas2Based\",\n               forceAtlas2Based = list(gravitationalConstant = -100)) %>%\n  visIgraphLayout(\n    layout = \"layout_with_fr\"\n  ) %>%\n  visGroups(groupname = \"Company\",\n            color = \"yellow\") %>%\n  visGroups(groupname = \"Beneficial Owner\",\n            color = \"lightblue\") %>%\n  visLegend() %>%\n  visEdges(\n    arrows = \"to\"\n  ) %>%\n  visOptions(\n    highlightNearest = list(enabled = T, degree = 2, hover = T),\n    nodesIdSelection = TRUE,\n    selectedBy = \"group\",\n    collapse = TRUE)\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nIt is interesting to note that there are no personnel that are beneficial owners of more than 1 companies for these “large” or extensive companies. There is a possibility that they do not want to have multiple owners for fear of a conflict of interest or corporate espionage. While this is not necessarily anomalous behaviour, it is an interesting point to note, and it may even be representative of the different cartels in the fish industry."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#loading-the-requisite-r-libraries-and-importing-the-json-file",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#loading-the-requisite-r-libraries-and-importing-the-json-file",
    "title": "Take-home Exercise 3 - MC3",
    "section": "2.1 Loading the requisite R libraries and importing the JSON file:",
    "text": "2.1 Loading the requisite R libraries and importing the JSON file:\n\n\nShow the code\npacman::p_load(jsonlite, tidygraph, ggraph, visNetwork, gralayouts, ggforce, tidytext, tidyverse, skimr, patchwork, ggdist, ggridges, ggthemes, scales)\n\n\n\n\nShow the code\nmc3_data <-\n  jsonlite::fromJSON(\"data/MC3.json\")"
  }
]